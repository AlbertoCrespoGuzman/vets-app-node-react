(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{267:function(e,t,a){e.exports=a(386)},382:function(e,t,a){},383:function(e,t,a){},384:function(e,t,a){},385:function(e,t,a){},386:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(21),s=a.n(i),o=a(154),l=a(35),c=a(93),d=a(32),u=a(43),m=a(232),p={},h=a(76),g=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},f={isAuthenticated:!1,user:{}},E={data:[],isFetching:!1,error:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return"LOAD_USERS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_USERS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_USERS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},b={data:[],isFetching:!1,error:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"LOAD_PROFILE_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_PROFILE_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_PROFILE_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},S={data:[],isFetching:!1,error:!1},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;return"LOAD_ADMIN_EXAMS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_ADMIN_EXAMS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_ADMIN_EXAMS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},w={data:[],isFetching:!1,error:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0;return"LOAD_EXAMS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_EXAMS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_EXAMS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},C=Object(u.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(h.a)({},e,{isAuthenticated:!g(t.payload),user:t.payload});default:return e}},users:v,profile:y,adminExams:O,exams:j}),x=a(254),k=a(38),F=a.n(k),A=a(61),R=function(e){return{type:"LOAD_USERS_SUCCESS",data:e}},P=function(e){return{type:"LOAD_PROFILE_SUCCESS",data:e}},T=function(e){return{type:"LOAD_ADMIN_EXAMS_SUCCESS",data:e}},I=function(e){return{type:"LOAD_EXAMS_SUCCESS",data:e}},N=F.a.mark(D);function D(e,t){var a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("usersSagas"),t.next=3,e.get("/api/users/");case 3:return a=t.sent,console.log(a.data),t.next=7,Object(A.a)(R(a.data));case 7:case"end":return t.stop()}},N)}var _=D,U=F.a.mark(L);function L(e,t){var a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("profileSagas"),t.next=3,e.get("/api/users/me");case 3:return a=t.sent,console.log("eeeee",a.data),t.next=7,Object(A.a)(P(a.data));case 7:case"end":return t.stop()}},U)}var M=L,W=F.a.mark(B);function B(e,t){var a;return F.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("/api/files/");case 2:return a=t.sent,console.log(a.data),t.next=6,Object(A.a)(I(a.data));case 6:case"end":return t.stop()}},W)}var q=B,z=F.a.mark(V);function V(e){var t;return F.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.get("/api/files/");case 2:return t=a.sent,console.log(t.data),a.next=6,Object(A.a)(T(t.data));case 6:case"end":return a.stop()}},z)}var X=V,Y=a(22),Q=a.n(Y),J=F.a.mark(H);function H(){return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.b)("LOAD_USERS_REQUEST",_,Q.a);case 2:return e.next=4,Object(A.b)("LOAD_PROFILE_REQUEST",M,Q.a);case 4:return e.next=6,Object(A.b)("LOAD_ADMIN_EXAMS_REQUEST",X,Q.a);case 6:return e.next=8,Object(A.b)("LOAD_EXAMS_REQUEST",q,Q.a);case 8:case"end":return e.stop()}},J)}var G=H,$=Object(x.a)(),K=Object(u.e)(C,{},Object(u.d)(Object(u.a)(m.a,$),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));$.run(G);var Z=K,ee=a(140),te=a.n(ee),ae=function(e){e?Q.a.defaults.headers.common.Authorization=e:delete Q.a.defaults.headers.common.Authorization};a(295).config();var ne=function(e){return{type:"SET_CURRENT_USER",payload:e}},re=function(e){return function(t){localStorage.removeItem("jwtToken"),ae(!1),t(ne({})),e.push("/login")}},ie=a(24),se=a(25),oe=a(28),le=a(26),ce=a(27),de=a(15),ue=a(399),me=a(449),pe=a(208),he=a(94),ge=a(204),fe=a(448),Ee=a(3),ve=a(72),be=a(458),ye=a(442),Se=a(450),Oe=a(206),we=a(177),je=a.n(we),Ce=a(249),xe=a.n(Ce),ke=a(248),Fe=a.n(ke),Ae=a(398),Re=a(451),Pe=a(222),Te=a(251),Ie=a.n(Te),Ne=a(184),De=a.n(Ne),_e=a(185),Ue=a.n(_e),Le=a(112),Me=a.n(Le),We=a(250),Be=a.n(We),qe=a(17),ze=a(4),Ve=a.n(ze),Xe=a(174),Ye=a(203),Qe=a(227),Je=a(201),He=a(230),Ge=a(202),$e=a(443),Ke=a(438),Ze=a(444),et=a(439),tt=a(437),at=a(205),nt=function(e){function t(){var e;return Object(ie.a)(this,t),(e=Object(oe.a)(this,Object(le.a)(t).call(this))).state={username:"",type:0,completename:"",cpf:"",address:"",errors:{},isFetching:!1},e.handleInputChange=e.handleInputChange.bind(Object(qe.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(qe.a)(e)),e.handleSelectTypeChange=e.handleSelectTypeChange.bind(Object(qe.a)(e)),e}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"handleSelectTypeChange",value:function(e){console.log("e ",e),this.setState({type:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,type:this.state.type,completename:this.state.completename,cpf:this.state.cpf,address:this.state.address,password:this.state.password,confirmPassword:this.state.confirmPassword};this.setState({isFetching:!0}),this.props.registerUser(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){if(e.auth.isAuthenticated,this.setState({isFetching:!1}),e.errors){var t=e.errors.errors;console.log(t);var a={};if(t&&t.length){for(var n=0;n<t.length;n++)console.log(t[n].param),"username"===t[n].param?a.username=t[n].msg:"password"===t[n].param?a.password=t[n].msg:"confirmPassword"===t[n].param?a.confirmPassword=t[n].msg:"type"===t[n].param&&(a.type=t[n].msg);console.log(a),this.setState({errors:a})}}}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&!this.props.auth.user.admin&&this.props.history.push("/")}},{key:"render",value:function(){var e,t,a,n,i=this.state.errors,s=rt();return r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh",marginTop:50}},r.a.createElement(tt.a,{item:!0,xs:5},r.a.createElement(Ke.a,{className:s.card},r.a.createElement(et.a,null,r.a.createElement(he.a,{variant:"h5",component:"h2"},"Casdastrar novo usu\xe1rio"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Je.a,{className:s.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"type-error"},"Tipo de Usu\xe1rio"),r.a.createElement(Qe.a,{value:this.state.type,onChange:this.handleSelectTypeChange,name:"type"},r.a.createElement(Ye.a,{value:0},r.a.createElement("em",null,"Escolha tipo de usu\xe1rio")),r.a.createElement(Ye.a,{value:1},"Cliente"),r.a.createElement(Ye.a,{value:2},"Cl\xednica"),r.a.createElement(Ye.a,{value:3},"Veterin\xe1rio"),r.a.createElement(Ye.a,{value:4},"Administrador")),i.type&&r.a.createElement($e.a,{id:"type-text"},i.type)),r.a.createElement(Je.a,{className:s.formControl,fullWidth:!0,margin:Ve.a.margin},r.a.createElement(He.a,{htmlFor:"username"},"E-mail"),r.a.createElement(Ge.a,(e={type:"text",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(de.a)(e,"onChange",this.handleInputChange),Object(de.a)(e,"value",this.state.username),e)),i.username&&r.a.createElement($e.a,{id:"username-text"},i.username)),r.a.createElement(Je.a,{className:s.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"completename"},"Nome Completo"),r.a.createElement(Ge.a,(t={type:"text",id:"completename",value:this.state.completename,name:"completename",onChange:this.handleInputChange,"aria-describedby":"completename-text"},Object(de.a)(t,"onChange",this.handleInputChange),Object(de.a)(t,"value",this.state.completename),t)),i.completename&&r.a.createElement($e.a,{id:"completename-text"},i.completename)),r.a.createElement(Je.a,{className:s.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"cpf"},"CPF/CNPJ"),r.a.createElement(Ge.a,(a={type:"text",id:"cpf",value:this.state.cpf,name:"cpf",onChange:this.handleInputChange,"aria-describedby":"cpf-text"},Object(de.a)(a,"onChange",this.handleInputChange),Object(de.a)(a,"value",this.state.cpf),a)),i.cpf&&r.a.createElement($e.a,{id:"cpf-text"},i.cpf)),r.a.createElement(Je.a,{className:s.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"address"},"Endere\xe7o"),r.a.createElement(Ge.a,(n={type:"text",id:"address",value:this.state.address,name:"address",onChange:this.handleInputChange,"aria-describedby":"address-text"},Object(de.a)(n,"onChange",this.handleInputChange),Object(de.a)(n,"value",this.state.address),n)),i.address&&r.a.createElement($e.a,{id:"address-text"},i.address)),r.a.createElement(Ze.a,null,!this.state.isFetching&&r.a.createElement(ge.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Cadastrar"),this.state.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(at.a,null))))))))}}]),t}(n.Component),rt=function(e){return{button:{},input:{display:"none"},formControl:{marginTop:200}}},it=Object(d.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){localStorage.getItem("jwtToken")?(Q.a.defaults.headers.common.Authorization=localStorage.getItem("jwtToken"),console.log(Q.a.defaults.headers.common.Authorization),Q.a.post("/api/users/register",e).then(function(e){return t.push("/users?registrationSucessfull=true")}).catch(function(e){console.log(JSON.stringify(e.response)),a({type:"GET_ERRORS",payload:e.response.data})})):t.push("/login")}}})(Object(c.e)(nt),Object(Xe.a)(rt)),st=a(110),ot=a.n(st),lt=a(87),ct=a.n(lt),dt=a(229),ut=a(397),mt=function(e){function t(e){return Object(ie.a)(this,t),Object(oe.a)(this,Object(le.a)(t).call(this,e))}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(at.a,null)),!this.props.isFetching&&r.a.createElement(ut.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:12},r.a.createElement(ot.a,{title:"Usu\xe1rios",columns:pt,data:this.props.users,editable:{onRowUpdate:function(t,a){return new Promise(function(n,r){Q.a.patch("api/users/"+a._id,t).then(function(t){e.props.loadUsers(),n()}).catch(function(e){r()})})},onRowDelete:function(e){return new Promise(function(e,t){setTimeout(function(){alert("op\xe7\xe3o n\xe3o habilitada"),e()},1e3)})}},options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Usuarios"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o usu\xe1rio?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))))}}]),t}(n.Component);var pt=[{title:"E-mail",field:"username"},{title:"Nome",field:"completename"},{title:"CPF/CNPJ",field:"cpf"},{title:"Endere\xe7o",field:"address",render:function(e){return r.a.createElement(dt.a,{title:e.address?e.address:"Sem Endere\xe7o definido",placement:"top"},r.a.createElement("div",null," ",e.address&&e.address.length>5?e.address.substring(0,5)+"...":e.address," "))}},{title:"Atividade",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(dt.a,{title:(t=e.lastActivity,ct()(t).format("DD/MM/YYYY hh:mm A"))},r.a.createElement("div",null," ",function(e){return ct()(e).format("DD/MM/YY")}(e.lastActivity)));var t}},{title:"Tipo",field:"type",lookup:{1:"Cliente",2:"Cl\xednica",3:"Veterin\xe1rio",4:"Admin"}}],ht=Object(d.b)(function(e){return{isFetching:e.users.isFetching,users:e.users.data,error:e.users.error}},function(e){return{loadUsers:function(){return e({type:"LOAD_USERS_REQUEST"})}}})(mt),gt=a(255),ft=a(453),Et=a(454),vt=a(446),bt=a(120),yt=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={isEditing:!1,tab:0,errors:!1,message:!1,isSaving:!1,password:"",confirmPassword:""},a.handleTabsChange=a.handleTabsChange.bind(Object(qe.a)(a)),a.changeToEditProfile=a.changeToEditProfile.bind(Object(qe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(qe.a)(a)),a.saveProfile=a.saveProfile.bind(Object(qe.a)(a)),a.postPassword=a.postPassword.bind(Object(qe.a)(a)),a.handleInputPasswordChange=a.handleInputPasswordChange.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.props.loadProfile()}},{key:"postPassword",value:function(){var e=this;this.state.password&&this.state.confirmPassword?this.state.password.length<6?this.setState({errors:"A senha deve ter minimo 6 carateres"}):this.state.password!=this.state.confirmPassword?this.setState({errors:"A senhas n\xe3o coincidem"}):(this.setState({isSaving:!0}),Q.a.post("/api/users/reset_password",{password:this.state.password,confirmPassword:this.state.confirmPassword}).then(function(t){e.setState({password:"",confirmPassword:"",isSaving:!1,message:"Sua senha foi redefinida com sucesso"})}).catch(function(t){t&&t.response&&e.setState({errors:JSON.stringify(t.response),isSaving:!1})})):this.setState({errors:"Por favor, escrever senha e confirmar a mesma"})}},{key:"saveProfile",value:function(){var e=this;this.setState({isSaving:!0}),Q.a.post("/api/users/me",this.props.profile).then(function(t){e.props.profile.address=t.data.address,e.props.profile.cpf=t.data.cpf,e.props.profile.completename=t.data.completename,e.setState({isSaving:!1,isEditing:!1})}).catch(function(t){e.setState({errors:JSON.stringify(t.response)})})}},{key:"handleInputChange",value:function(e){var t=e.target.name;this.props.profile[t]=e.target.value,this.setState({})}},{key:"handleInputPasswordChange",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"handleSelectTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"handleSubmitProfile",value:function(e){e.preventDefault()}},{key:"handleTabsChange",value:function(e,t){this.setState({tab:t})}},{key:"changeToEditProfile",value:function(){this.setState({isEditing:!0})}},{key:"render",value:function(){var e;return r.a.createElement("div",{style:{marginTop:80,marginLeft:30,width:"100%",height:"100%",flex:1,justifyContent:"center",alignContent:"center"}},r.a.createElement(he.a,null,"Meu Perfil"),r.a.createElement(bt.a,{style:{marginTop:10,width:"70%"}},r.a.createElement(Et.a,{value:this.state.tab,onChange:this.handleTabsChange,"aria-label":"Meu Perfil"},r.a.createElement(vt.a,Object.assign({label:"Detalhes Conta"},wt(0))),r.a.createElement(vt.a,Object.assign({label:"Modificar Senha"},wt(1)))),r.a.createElement(Ot,{value:this.state.tab,index:0},!this.props.isFetching&&r.a.createElement("form",{onSubmit:this.handleSubmitProfile},r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"type-error"},"Tipo de Usu\xe1rio"),r.a.createElement(Qe.a,{value:this.props.profile.type,onChange:this.handleSelectTypeChange,name:"type",disabled:!0},r.a.createElement(Ye.a,{value:0},r.a.createElement("em",null,"Escolha tipo de usu\xe1rio")),r.a.createElement(Ye.a,{value:1},"Cliente"),r.a.createElement(Ye.a,{value:2},"Cl\xednica"),r.a.createElement(Ye.a,{value:3},"Veterin\xe1rio"),r.a.createElement(Ye.a,{value:4},"Administrador"))),r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0,margin:Ve.a.margin},r.a.createElement(He.a,{htmlFor:"username"},"E-mail"),r.a.createElement(Ge.a,(e={type:"text",id:"username",name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(de.a)(e,"onChange",this.handleInputChange),Object(de.a)(e,"value",this.props.profile.username),Object(de.a)(e,"disabled",!0),e))),r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"completename"},"Nome Completo"),r.a.createElement(Ge.a,{type:"text",id:"completename",name:"completename",onChange:this.handleInputChange,"aria-describedby":"completename-text",value:this.props.profile.completename,disabled:!this.state.isEditing}),this.props.error.completename&&r.a.createElement($e.a,{id:"completename-text"},this.props.error.completename)),r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"cpf"},"CPF/CNPJ"),r.a.createElement(Ge.a,{type:"text",id:"cpf",name:"cpf","aria-describedby":"cpf-text",onChange:this.handleInputChange,value:this.props.profile.cpf,disabled:!this.state.isEditing}),this.props.error.cpf&&r.a.createElement($e.a,{id:"cpf-text"},this.props.error.cpf)),r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"address"},"Endere\xe7o"),r.a.createElement(Ge.a,{type:"text",id:"address",name:"address","aria-describedby":"address-text",onChange:this.handleInputChange,value:this.props.profile.address,disabled:!this.state.isEditing}),this.props.error.address&&r.a.createElement($e.a,{id:"address-text"},this.props.error.address)),r.a.createElement(Ze.a,null,!this.state.isSaving&&!this.state.isEditing&&r.a.createElement(ge.a,{onClick:this.changeToEditProfile,fullWidth:!0,variant:"outlined",color:"primary",type:"submit"},"Modificar Perfil"),!this.state.isSaving&&this.state.isEditing&&r.a.createElement(ge.a,{onClick:this.saveProfile,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Salvar"),this.state.isSaving&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(at.a,null))))),r.a.createElement(Ot,{value:this.state.tab,index:1},!this.props.isFetching&&r.a.createElement("form",{onSubmit:this.handleSubmitProfile},r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0,margin:Ve.a.margin},r.a.createElement(He.a,{htmlFor:"password"},"Nova senha"),r.a.createElement(Ge.a,{type:"password",id:"password",name:"password",onChange:this.handleInputPasswordChange,"aria-describedby":"password-text",value:this.state.password})),r.a.createElement(Je.a,{className:St.formControl,fullWidth:!0,margin:Ve.a.margin},r.a.createElement(He.a,{htmlFor:"confirmPassword"},"Confirmar Nova senha"),r.a.createElement(Ge.a,{type:"password",id:"confirmPassword",name:"confirmPassword",onChange:this.handleInputPasswordChange,"aria-describedby":"confirmPassword-text",value:this.state.confirmPassword})),this.state.errors&&r.a.createElement($e.a,{id:"password-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement($e.a,{id:"password-text",style:{color:"green"}},this.state.message),r.a.createElement(Ze.a,null,!this.state.isSaving&&r.a.createElement(ge.a,{onClick:this.postPassword,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Redefinir Senha"),this.state.isSaving&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(at.a,null)))))))}}]),t}(n.Component),St={};function Ot(e){var t=e.children,a=e.value,n=e.index,i=Object(gt.a)(e,["children","value","index"]);return r.a.createElement(he.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),r.a.createElement(ft.a,{p:3},t))}function wt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var jt=Object(d.b)(function(e){return{isFetching:e.profile.isFetching,profile:e.profile.data,error:e.profile.error}},function(e){return{loadProfile:function(){return e({type:"LOAD_PROFILE_REQUEST"})}}})(yt),Ct=function(e){function t(e){return Object(ie.a)(this,t),Object(oe.a)(this,Object(le.a)(t).call(this,e))}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.props.loadExams()}},{key:"render",value:function(){return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(at.a,null)),!this.props.isFetching&&r.a.createElement(ut.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:12},r.a.createElement(ot.a,{title:"Exames",columns:kt,data:this.props.exams,actions:[{icon:"remove_red_eye",tooltip:"Visualizar Arquivo",onClick:function(e,t){Q()("/api/files/"+t._id,{method:"GET",responseType:"blob"}).then(function(e){console.log("response!",e.data);var t=new Blob([e.data],{type:"application/pdf"}),a=URL.createObjectURL(t);window.open(a)}).catch(function(e){console.log(e)})}}],options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Lista de Exames"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o exame?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))))}}]),t}(n.Component);function xt(e){return ct()(e).format("DD/MM/YYYY hh:mm A")}var kt=[{title:"Nome",field:"displayName"},{title:"Tipo",field:"type"},{title:"Usu\xe1rio",field:"user.completename"},{title:"Lido",field:"read",type:"boolean"},{title:"Data subida",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(dt.a,{title:xt(e.lastActivity)},r.a.createElement("div",null," ",xt(e.lastActivity)))}}],Ft=Object(d.b)(function(e){return{isFetching:e.exams.isFetching,exams:e.exams.data,error:e.exams.error}},function(e){return{loadExams:function(){return e({type:"LOAD_EXAMS_REQUEST"})}}})(Ct),At=function(e){function t(e){return Object(ie.a)(this,t),Object(oe.a)(this,Object(le.a)(t).call(this,e))}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.props.loadAdminExams()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(at.a,null)),!this.props.isFetching&&r.a.createElement(ut.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:12},r.a.createElement(ot.a,{title:"Exames",columns:Pt,data:this.props.adminExams,actions:[{icon:"remove_red_eye",tooltip:"Visualizar Arquivo",onClick:function(e,t){Q()("/api/files/"+t._id,{method:"GET",responseType:"blob"}).then(function(e){console.log("response!",e.data);var t=new Blob([e.data],{type:"application/pdf"}),a=URL.createObjectURL(t);window.open(a)}).catch(function(e){console.log(e)})}}],editable:{onRowDelete:function(t){return new Promise(function(a,n){Q.a.delete("/api/files/"+t._id).then(function(t){e.props.loadAdminExams(),a(t)}).catch(function(e){n(e)})})}},options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Lista de Exames"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o exame?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))))}}]),t}(n.Component);function Rt(e){return ct()(e).format("DD/MM/YYYY hh:mm A")}var Pt=[{title:"Nome",field:"displayName"},{title:"Tipo",field:"type"},{title:"Lido",field:"read",type:"boolean"},{title:"\xdaltima vez lida",field:"lastRead",type:"datetime",render:function(e){return r.a.createElement(dt.a,{title:Rt(e.lastRead)},r.a.createElement("div",null," ",(t=e.lastRead,ct()(t).format("DD/MM/YY"))));var t}},{title:"Data subida",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(dt.a,{title:Rt(e.lastActivity)},r.a.createElement("div",null," ",Rt(e.lastActivity)))}}],Tt=Object(d.b)(function(e){return{isFetching:e.adminExams.isFetching,adminExams:e.adminExams.data,error:e.adminExams.error}},function(e){return{loadAdminExams:function(){return e({type:"LOAD_ADMIN_EXAMS_REQUEST"})}}})(At),It=a(243),Nt=(a(382),a(383),a(244)),Dt=a.n(Nt),_t=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={hightlight:!1},a.fileInputRef=r.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(qe.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(qe.a)(a)),a.onDragOver=a.onDragOver.bind(Object(qe.a)(a)),a.onDragLeave=a.onDragLeave.bind(Object(qe.a)(a)),a.onDrop=a.onDrop.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabed||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(e){this.setState({hightlight:!1})}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabed){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}this.setState({hightlight:!1})}}},{key:"fileListToArray",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e.item(a));return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},r.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",accept:"application/pdf",onChange:this.onFilesAdded}),r.a.createElement(Dt.a,null),r.a.createElement("span",null,"Upload Exames "))}}]),t}(n.Component),Ut=(a(384),function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={},a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",{className:"Progress",style:{width:this.props.progress+"%"}}))}}]),t}(n.Component)),Lt=a(245),Mt=a.n(Lt),Wt=a(246),Bt=a.n(Wt),qt=a(247),zt=a.n(qt),Vt=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={files:[],uploading:!1,uploadProgress:{},successfullUploaded:!1},a.onFilesAdded=a.onFilesAdded.bind(Object(qe.a)(a)),a.uploadFiles=a.uploadFiles.bind(Object(qe.a)(a)),a.sendRequest=a.sendRequest.bind(Object(qe.a)(a)),a.renderActions=a.renderActions.bind(Object(qe.a)(a)),a.sendRequest=a.sendRequest.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"onFilesAdded",value:function(e){this.setState(function(t){return{files:t.files.concat(e)}})}},{key:"uploadFiles",value:function(){var e=Object(It.a)(F.a.mark(function e(){var t,a=this;return F.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploadProgress:{},uploading:!0}),t=[],this.state.files.forEach(function(e){t.push(a.sendRequest(e))}),e.prev=3,e.next=6,Promise.all(t);case 6:this.setState({successfullUploaded:!0,uploading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({successfullUploaded:!0,uploading:!1});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(e){var t=this;return new Promise(function(a,n){var r=new FormData;r.append("userId",t.props.data.userId),r.append("displayName",t.props.data.displayName),r.append("file",e),console.log("fileee",JSON.stringify(e));var i=!0,s=!1,o=void 0;try{for(var l,c=r.entries()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var d=l.value;console.log(d[0]+", "+d[1])}}catch(m){s=!0,o=m}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}var u=t;Q()({method:"post",url:"/api/files",data:r,config:{headers:{"Content-Type":"multipart/form-data"}},onUploadProgress:function(a){if(a.loaded===100*a.total){var n=Object(h.a)({},t.state.uploadProgress);n[e.name]={state:"done",percentage:100},t.setState({uploadProgress:n})}else{var r=Object(h.a)({},t.state.uploadProgress);r[e.name]={state:"pending",percentage:a.loaded/a.total*100},t.setState({uploadProgress:r})}}}).then(function(t){var a=Object(h.a)({},u.state.uploadProgress);a[e.name]={state:"done",percentage:100},u.setState({uploadProgress:a}),u.props.triggerUploadedFinished(),console.log(t)}).catch(function(e){console.log(JSON.stringify(e.response))})})}},{key:"renderProgress",value:function(e){var t=this.state.uploadProgress[e.name];if(console.log("renderProgress",t),this.state.uploading||this.state.successfullUploaded)return r.a.createElement("div",{className:"ProgressWrapper"},r.a.createElement(Ut,{progress:t?t.percentage:0,style:{float:"right"}}),r.a.createElement(Mt.a,{style:{opacity:t&&"done"===t.state?.5:0,float:"left",marginLeft:10}}))}},{key:"renderActions",value:function(){var e=this;return this.state.successfullUploaded?r.a.createElement(ge.a,{onClick:function(){return e.setState({files:[],successfullUploaded:!1})}},"Limpar"):r.a.createElement(ge.a,{disabled:this.state.files.length<0||this.state.uploading,onClick:this.uploadFiles},"Fazer Upload")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Upload",style:{padding:20}},r.a.createElement("div",{className:"Content"},r.a.createElement("div",null,r.a.createElement(_t,{onFilesAdded:this.onFilesAdded,disabled:this.state.uploading||this.state.successfullUploaded})),r.a.createElement("div",{className:"Files"},r.a.createElement(ye.a,null,r.a.createElement(Ae.a,null,r.a.createElement(Bt.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(he.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},"Arquivo para: ",this.props.data.user.completename)),r.a.createElement(Ae.a,null,r.a.createElement(zt.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(he.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},"Nome do Arquivo: ",this.props.data.displayName.length>0?this.props.data.displayName:"Manter nome original do Arquivo"))),this.state.files.map(function(t){return r.a.createElement("div",{key:t.name,className:"Row"},r.a.createElement(ye.a,null,r.a.createElement(Ae.a,null,r.a.createElement(Me.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(he.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},t.name))),r.a.createElement("br",null),e.renderProgress(t))}))),r.a.createElement("div",{className:"Actions"},this.renderActions()))}}]),t}(n.Component),Xt=(a(385),a(228)),Yt=a(457),Qt=a(447),Jt=a(455),Ht=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={user:!1,displayName:"",userId:0,activeStep:0,skipped:new Set,steps:a.getSteps(),showStepper:!0},a.handleSelectedUser=a.handleSelectedUser.bind(Object(qe.a)(a)),a.handleNext=a.handleNext.bind(Object(qe.a)(a)),a.handleBack=a.handleBack.bind(Object(qe.a)(a)),a.handleSkip=a.handleSkip.bind(Object(qe.a)(a)),a.handleReset=a.handleReset.bind(Object(qe.a)(a)),a.getStepContent=a.getStepContent.bind(Object(qe.a)(a)),a.handledisplayName=a.handledisplayName.bind(Object(qe.a)(a)),a.triggerUploadedFinished=a.triggerUploadedFinished.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"handledisplayName",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"handleSelectedUser",value:function(e){if(e&&0!=e.target.value){var t="";this.props.users.map(function(a,n){a._id===e.target.value&&(t=a)}),this.setState({userId:e.target.value,user:t})}else this.setState({userNameSelected:!1,userId:0})}},{key:"getSteps",value:function(){return["Seleciona Usu\xe1rio","Nome para o arquivo","Upload arquivo"]}},{key:"getStepContent",value:function(e){switch(e){case 0:return this.renderSelectUser();case 1:return this.renderdisplayName();case 2:return this.renderUploadFile();default:return"Passo desconhecido, reiniciar pagina"}}},{key:"renderSelectUser",value:function(){return r.a.createElement(Ke.a,{style:{minHeight:300},alignitems:"center",justify:"center"},this.props.isFetchingUsers&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(at.a,null)),!this.props.isFetchingUsers&&r.a.createElement(Je.a,{fullWidth:!0,style:{padding:50}},r.a.createElement(Qe.a,{native:!0,value:this.state.userId,onChange:this.handleSelectedUser},r.a.createElement("option",{value:0}," Escolher Usu\xe1rio "),this.props.users.map(function(e,t){return r.a.createElement("option",{key:e._id,value:e._id},e.completename)})),this.state.errors&&r.a.createElement($e.a,{id:"username-text",style:{color:"red"}},this.state.errors)))}},{key:"renderdisplayName",value:function(){return r.a.createElement(Ke.a,{style:{minHeight:300}},r.a.createElement(Je.a,{fullWidth:!0,style:{padding:50}},r.a.createElement(Xt.a,{label:"Nome para o Arquivo",placeholder:"Nome para o Arquivo",helpertext:"Se quiser manter o nome do arquivo original, pode clicar em Pular",margin:"normal",name:"displayName",variant:"outlined",onChange:this.handledisplayName}),this.state.errors&&r.a.createElement($e.a,{id:"username-text",style:{color:"red"}},this.state.errors)))}},{key:"renderUploadFile",value:function(){return r.a.createElement(Ke.a,null,r.a.createElement(Vt,{data:this.state,triggerUploadedFinished:this.triggerUploadedFinished}))}},{key:"isStepOptional",value:function(e){return 1===e}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"handleNext",value:function(){var e=this.state.skipped;this.isStepSkipped(this.state.activeStep)&&(e=new Set(e.values())).delete(this.state.activeStep),0===this.state.activeStep&&0===this.state.userId?this.setState({errors:"Por favor, escolha um usu\xe1rio da lista"}):1===this.state.activeStep&&0===this.state.displayName.length?this.setState({errors:"Por favor, se quiser manter o nome original clique em Pular"}):this.setState({activeStep:this.state.activeStep+1,errors:!1,newSkipped:e})}},{key:"handleBack",value:function(){this.setState({activeStep:this.state.activeStep-1})}},{key:"handleSkip",value:function(){if(!this.isStepOptional(this.state.activeStep))throw new Error("N\xe3o pode pular este passo porque n\xe3o \xe9 opcional.");this.setState({activeStep:this.state.activeStep+1,displayName:""});var e=new Set(this.state.skipped.values());e.add(this.state.activeStep),this.setState({skipped:e})}},{key:"handleReset",value:function(){this.setState({activeStep:0})}},{key:"triggerUploadedFinished",value:function(){this.setState({uploadFinished:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:"80%",margin:40,marginTop:100}},this.state.showStepper&&r.a.createElement("div",null,r.a.createElement(Yt.a,{activeStep:this.state.activeStep},this.state.steps.map(function(t,a){var n={},i={};return e.isStepOptional(a)&&(i.optional=r.a.createElement(he.a,{variant:"caption",component:"span"},"Opcional")),e.isStepSkipped(a)&&(n.completed=!1),r.a.createElement(Qt.a,Object.assign({key:t},n),r.a.createElement(Jt.a,i,t))})),r.a.createElement("div",null,this.state.activeStep===this.state.steps.length?r.a.createElement("div",null,r.a.createElement(he.a,{style:{marginTop:3,marginBottom:3},component:"span"},"Upload realizado com sucesso!"),r.a.createElement(ge.a,{onClick:this.handleReset,style:{marginRight:3},component:"span"},"Adicionar mais")):r.a.createElement("div",null,r.a.createElement(he.a,{component:"span",style:{marginTop:3,marginBottom:3}},this.getStepContent(this.state.activeStep)),r.a.createElement("div",null,r.a.createElement(ge.a,{disabled:0===this.state.activeStep,onClick:this.handleBack,style:{marginRight:3}},"Voltar"),this.isStepOptional(this.state.activeStep)&&r.a.createElement(ge.a,{variant:"contained",color:"primary",onClick:this.handleSkip,style:{marginRight:3}},"Pular"),r.a.createElement(ge.a,{variant:"contained",color:"primary",onClick:this.handleNext,style:{marginRight:3},disabled:this.state.activeStep===this.state.steps.length-1&&!this.state.uploadFinished},this.state.activeStep===this.state.steps.length-1?"Finalizar":"Seguinte"))))))}}]),t}(n.Component),Gt=Object(d.b)(function(e){return{isFetchingUsers:e.users.isFetching,users:e.users.data,error:e.users.error}},function(e){return{loadUsers:function(){return e({type:"LOAD_USERS_REQUEST"})}}})(Ht),$t=a(252),Kt=a.n($t),Zt=Object(ue.a)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(de.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}});function ea(e){var t,a,n=Zt(),i=Object(ve.a)(),s=r.a.useState(!1),d=Object(o.a)(s,2),u=d[0],m=d[1];function p(){e.logoutUser(e.history)}return r.a.createElement("div",{className:n.root},r.a.createElement(fe.a,null),r.a.createElement(l.a,null,r.a.createElement(me.a,{position:"fixed",className:Object(Ee.a)(n.appBar,Object(de.a)({},n.appBarShift,u))},r.a.createElement(pe.a,null,r.a.createElement(Oe.a,{color:"inherit","aria-label":"open drawer",onClick:function(){m(!0)},edge:"start",className:Object(Ee.a)(n.menuButton,Object(de.a)({},n.hide,u))},r.a.createElement(je.a,null)),r.a.createElement(he.a,{variant:"h6",noWrap:!0},"Vets"),r.a.createElement("div",{className:n.sectionDesktop,style:{position:"absolute",right:"0",top:15,marginRight:50}},e.user.completename),r.a.createElement("div",{className:n.sectionDesktop,style:{fontSize:10,position:"absolute",right:"0",top:38,marginRight:50}},e.user.username))),r.a.createElement(be.a,{variant:"permanent",className:Object(Ee.a)(n.drawer,(t={},Object(de.a)(t,n.drawerOpen,u),Object(de.a)(t,n.drawerClose,!u),t)),classes:{paper:Object(Ee.a)((a={},Object(de.a)(a,n.drawerOpen,u),Object(de.a)(a,n.drawerClose,!u),a))},open:u},r.a.createElement("div",{className:n.toolbar},r.a.createElement(Oe.a,{onClick:function(){m(!1)}},"rtl"===i.direction?r.a.createElement(Fe.a,null):r.a.createElement(xe.a,null))),r.a.createElement(Se.a,null),e.user.admin&&r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/register"},r.a.createElement(Re.a,null,r.a.createElement(Be.a,null)),r.a.createElement(Pe.a,{primary:"Adicionar Usu\xe1rio"})),r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/users"},r.a.createElement(Re.a,null,r.a.createElement(Ie.a,null)),r.a.createElement(Pe.a,{primary:"Usu\xe1rios"}))),r.a.createElement(Se.a,null),r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/add_admin_exams"},r.a.createElement(Re.a,null,r.a.createElement(Kt.a,null)),r.a.createElement(Pe.a,{primary:"Adicionar Exame"})),r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/admin_exams"},r.a.createElement(Re.a,null,r.a.createElement(Me.a,null)),r.a.createElement(Pe.a,{primary:"Exames"}))),r.a.createElement(Se.a,null),r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/profile"},r.a.createElement(Re.a,null,r.a.createElement(De.a,null)),r.a.createElement(Pe.a,{primary:"Perfil"}))),r.a.createElement(Se.a,null),r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,onClick:p,color:"inherit"},r.a.createElement(Re.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Pe.a,{primary:"Sair"})))),!e.user.admin&&r.a.createElement("div",null,r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/exams"},r.a.createElement(Re.a,null,r.a.createElement(Me.a,null)),r.a.createElement(Pe.a,{primary:"Exames"}))),r.a.createElement(Se.a,null),r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",to:"/profile"},r.a.createElement(Re.a,null,r.a.createElement(De.a,null)),r.a.createElement(Pe.a,{primary:"Perfil"}))),r.a.createElement(Se.a,null),r.a.createElement(ye.a,null,r.a.createElement(Ae.a,{button:!0,component:l.b,color:"inherit",onClick:p},r.a.createElement(Re.a,null,r.a.createElement(Ue.a,null)),r.a.createElement(Pe.a,{primary:"Sair"}))))),r.a.createElement(c.a,{exact:!0,path:"/users",component:ht}),r.a.createElement(c.a,{exact:!0,path:"/profile",component:jt}),r.a.createElement(c.a,{exact:!0,path:"/exams",component:Ft}),r.a.createElement(c.a,{exact:!0,path:"/add_admin_exams",component:Gt}),r.a.createElement(c.a,{exact:!0,path:"/admin_exams",component:Tt}),r.a.createElement(c.a,{exact:!0,path:"/register",component:it})))}var ta=Object(ue.a)(function(e){var t;return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(de.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},e.breakpoints.up("sm"),{width:9*e.spacing.unit+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:3*e.spacing.unit},sectionDesktop:(t={display:"none"},Object(de.a)(t,e.breakpoints.up("md"),{display:"flex"}),Object(de.a)(t,"float","right"),Object(de.a)(t,"position","absolute"),Object(de.a)(t,"right","0"),t),title:{flexGrow:1,marginLeft:300}}}),aa=function(e){function t(){return Object(ie.a)(this,t),Object(oe.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=r.a.createElement("div",{className:ta.sectionDesktop,style:{position:"absolute",right:"0"}},r.a.createElement(ge.a,{component:l.b,color:"inherit",to:"/login",style:{marginRight:30}},"Login"));return r.a.createElement("div",{className:ta.root},r.a.createElement(fe.a,null),r.a.createElement(me.a,{position:"fixed",className:Object(Ee.a)(ta.appBar,Object(de.a)({},ta.appBarShift,!1))},r.a.createElement(pe.a,null,r.a.createElement(he.a,{variant:"h6",className:ta.title},"Vets"),r.a.createElement("div",null),t?"":n)),t?r.a.createElement(ea,{logoutUser:this.props.logoutUser,history:this.props.history,user:a}):"")}}]),t}(n.Component),na=Object(d.b)(function(e){return{auth:e.auth}},{logoutUser:re})(Object(c.e)(aa)),ra=a(452),ia=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={username:"",message:!1,errors:!1,isFetching:!1,emailSent:!1},a.handleSubmit=a.handleSubmit.bind(Object(qe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.state.username&&this.state.username.length>4&&-1!=this.state.username.indexOf("@")&&-1!=this.state.username.indexOf(".")?(this.setState({isFetching:!0}),Q.a.post("/api/users/forgot",{username:this.state.username}).then(function(e){t.setState({message:e.data.msg,errors:!1,isFetching:!1,emailSent:!0})}).catch(function(e){t.setState({errors:e&&e.response&&e.response.data?JSON.stringify(e.response.data.msg):"Erro desconhecido, tente mais tarde",isFetching:!1})})):this.setState({errors:"email invalido",isFetching:!1})}},{key:"handleInputChange",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e;return r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:6},r.a.createElement(Ke.a,{style:{width:"100%"}},r.a.createElement(et.a,null,r.a.createElement(he.a,{color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(he.a,{variant:"h5",component:"h2"},"Recuperar Senha"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Je.a,{fullWidth:!0},r.a.createElement(He.a,{htmlFor:"username"},"E-mail"),r.a.createElement(Ge.a,(e={type:"username",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(de.a)(e,"onChange",this.handleInputChange),Object(de.a)(e,"value",this.state.username),e)),this.state.errors&&r.a.createElement($e.a,{id:"username-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement($e.a,{id:"username-text",style:{color:"green"}},this.state.message)),r.a.createElement(Ze.a,null,this.state.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30},fullWidth:!0},r.a.createElement(at.a,null)),!this.state.isFetching&&r.a.createElement(ge.a,{disabled:this.state.emailSent,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Enviar E-mail de Recupera\xe7\xe3o de Senha")))))))}}]),t}(n.Component),sa=function(e){function t(){var e;return Object(ie.a)(this,t),(e=Object(oe.a)(this,Object(le.a)(t).call(this))).state={username:"",password:"",errors:{}},e.handleInputChange=e.handleInputChange.bind(Object(qe.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(qe.a)(e)),e}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log();var t={username:this.state.username,password:this.state.password};this.props.loginUser(t)}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e,t,a=this.state.errors;return r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:6},r.a.createElement(Ke.a,{className:la.card},r.a.createElement(et.a,null,r.a.createElement(he.a,{className:la.title,color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(he.a,{variant:"h5",component:"h2"},"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Je.a,{className:la.formControl,fullWidth:!0},r.a.createElement(He.a,{htmlFor:"username"},"E-mail"),r.a.createElement(Ge.a,(e={type:"username",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(de.a)(e,"onChange",this.handleInputChange),Object(de.a)(e,"value",this.state.username),e)),a.username&&r.a.createElement($e.a,{id:"username-text",style:{color:"red"}},a.username)),r.a.createElement(Je.a,{fullWidth:!0,className:la.formControl},r.a.createElement(He.a,{htmlFor:"password"},"Senha"),r.a.createElement(Ge.a,(t={type:"password",id:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,"aria-describedby":"password-text"},Object(de.a)(t,"onChange",this.handleInputChange),Object(de.a)(t,"value",this.state.password),t)),a.password&&r.a.createElement($e.a,{id:"password-text",style:{color:"red"}},a.password)),r.a.createElement(Ze.a,null,r.a.createElement(ge.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Login")))),r.a.createElement(Ze.a,null,r.a.createElement(ra.a,{component:oa,to:"/forgot_password"},"Esqueceu sua senha?")))))}}]),t}(n.Component),oa=r.a.forwardRef(function(e,t){return r.a.createElement(l.b,Object.assign({innerRef:t},e))}),la=Object(ue.a)(function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),width:"100%"},card:{minWidth:275,maxWidth:400},button:{margin:e.spacing(1),width:"100%"},input:{display:"none",width:"100%"},title:{alignItems:"center",justify:"center"}}}),ca=Object(d.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){Q.a.post("http://localhost:4444/api/users/login",e).then(function(e){console.log("res",e.data);var a=e.data.token;localStorage.setItem("jwtToken",a),ae(a);var n=te()(a);t(ne(n))}).catch(function(e){console.log(e),console.log(e.response),e&&e.response?t({type:"GET_ERRORS",payload:e.response.data}):console.log(e)})}}})(sa),da=function(e){function t(){return Object(ie.a)(this,t),Object(oe.a)(this,Object(le.a)(t).apply(this,arguments))}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"red",marginTop:100}},"Home Component 22222222")}}]),t}(n.Component),ua=a(253),ma=a(224),pa=function(e){function t(e){var a;return Object(ie.a)(this,t),(a=Object(oe.a)(this,Object(le.a)(t).call(this,e))).state={password:"",confirmPassword:"",message:!1,errors:!1,isFetching:!1,passwordReseted:!1},a.handleSubmit=a.handleSubmit.bind(Object(qe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(qe.a)(a)),a}return Object(ce.a)(t,e),Object(se.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password&&this.state.password.length<6)this.setState({errors:"A senha deve ter m\xednimo 6 carateres"});else if(this.state.password!=this.state.confirmPassword)this.setState({erros:"A senhas digitadas n\xe3o coincidem"});else{this.setState({isFetching:!0});var a="/api/users/reset_password/";2==this.props.location.search.split("=").length&&(a+="token/"+this.props.location.search.split("=")[1]),Q.a.post(a,{password:this.state.password,confirmPassword:this.state.confirmPassword}).then(function(e){t.setState({message:e.data.msg,errors:!1,isFetching:!1,passwordReseted:!0})}).catch(function(e){t.setState({errors:JSON.stringify(e.response.data.msg),isFetching:!1})})}}},{key:"handleInputChange",value:function(e){this.setState(Object(de.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(tt.a,{item:!0,xs:6},r.a.createElement(Ke.a,{style:{width:"100%"}},r.a.createElement(et.a,null,r.a.createElement(he.a,{color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(he.a,{variant:"h5",component:"h2"},"Resetar Senha"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(Je.a,{fullWidth:!0},r.a.createElement(He.a,{htmlFor:"password"},"Senha"),r.a.createElement(Ge.a,Object(de.a)({type:"password",id:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,"aria-describedby":"password-text"},"onChange",this.handleInputChange))),r.a.createElement(Je.a,{fullWidth:!0},r.a.createElement(He.a,{htmlFor:"confirmPassword"},"Confirmar Senha"),r.a.createElement(Ge.a,Object(de.a)({type:"password",id:"confirmPassword",value:this.state.confirmPassword,name:"confirmPassword",onChange:this.handleInputChange,"aria-describedby":"confirmPassword-text"},"onChange",this.handleInputChange)),this.state.errors&&r.a.createElement($e.a,{id:"confirmPassword-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement($e.a,{id:"confirmPassword-text",style:{color:"green"}},this.state.message)),r.a.createElement(Ze.a,null,this.state.isFetching&&r.a.createElement(tt.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30},fullWidth:!0},r.a.createElement(at.a,null)),!this.state.isFetching&&r.a.createElement(ge.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:this.state.passwordReseted},"Redefinir Senha")))))))}}]),t}(n.Component);if(localStorage.jwtToken){ae(localStorage.jwtToken);var ha=te()(localStorage.jwtToken);Z.dispatch(ne(ha));var ga=Date.now()/1e3;ha.exp<ga&&(Z.dispatch(re()),window.location.href="/login")}var fa=function(){var e=Object(n.useState)({palette:{type:"light",primary:{main:"#13aa52"},secondary:{main:"#E33E7F"},accent:{main:"#E33E7F"},background:{default:"#e6e6e6"}}}),t=Object(o.a)(e,2),a=t[0],i=(t[1],Object(ua.a)(a));return r.a.createElement(d.a,{store:Z},r.a.createElement(ma.a,{theme:i},r.a.createElement(fe.a,null),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(na,null),r.a.createElement(c.a,{exact:!0,path:"/",component:da}),r.a.createElement("div",{className:""},r.a.createElement(c.a,{exact:!0,path:"/login",component:ca}),r.a.createElement(c.a,{exact:!0,path:"/forgot_password",component:ia}),r.a.createElement(c.a,{exact:!0,path:"/reset_password",component:pa}))))))},Ea=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function va(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(fa,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");Ea?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):va(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):va(e)})}}()}},[[267,1,2]]]);
//# sourceMappingURL=main.237d3703.chunk.js.map