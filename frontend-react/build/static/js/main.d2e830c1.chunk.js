(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{278:function(e,t,a){e.exports=a(397)},393:function(e,t,a){},394:function(e,t,a){},395:function(e,t,a){},396:function(e,t,a){},397:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(22),s=a.n(i),o=a(156),l=a(38),c=a(96),d=a(32),m=a(47),u=a(234),p={},h=a(79),g=function(e){return void 0===e||null===e||"object"===typeof e&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length},f={isAuthenticated:!1,user:{}},E={data:[],isFetching:!1,error:!1},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;return"LOAD_USERS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_USERS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_USERS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},b={data:[],isFetching:!1,error:!1},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;return"LOAD_PROFILE_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_PROFILE_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_PROFILE_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},S={data:[],isFetching:!1,error:!1},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;return"LOAD_ADMIN_EXAMS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_ADMIN_EXAMS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_ADMIN_EXAMS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},O={data:[],isFetching:!1,error:!1},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;return"LOAD_EXAMS_REQUEST"===t.type?{isFetching:!0,data:[],error:!1}:"LOAD_EXAMS_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1}:"LOAD_EXAMS_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},x={data:[],isFetching:!1,error:!1,file_id:null},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;return"LOAD_CHATDIALOG_REQUEST"===t.type?{isFetching:!0,data:[],error:!1,file_id:t.file_id}:"LOAD_CHATDIALOG_SUCCESS"===t.type?{isFetching:!1,data:t.data,error:!1,file_id:t.file_id}:"LOAD_CHATDIALOG_ERROR"===t.type?{isFetching:!1,data:[],error:!0}:e},R=Object(m.c)({errors:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_ERRORS":return t.payload;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_CURRENT_USER":return Object(h.a)({},e,{isAuthenticated:!g(t.payload),user:t.payload});default:return e}},users:v,profile:y,adminExams:C,exams:j,chatDialog:w}),k=a(259),F=a(35),A=a.n(F),T=a(46),_=function(e){return{type:"LOAD_USERS_SUCCESS",data:e}},D=function(e){return{type:"LOAD_PROFILE_SUCCESS",data:e}},I=function(e){return{type:"LOAD_ADMIN_EXAMS_SUCCESS",data:e}},N=function(e){return{type:"LOAD_EXAMS_SUCCESS",data:e}},P=function(e,t){return{type:"LOAD_CHATDIALOG_SUCCESS",data:e,file_id:t}},U=a(24),L=a.n(U),M=A.a.mark(W);function W(e,t){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("usersSagas"),t.next=3,e.get("http://localhost:4444/api/users/");case 3:return a=t.sent,console.log(a.data),t.next=7,Object(T.a)(_(a.data));case 7:case"end":return t.stop()}},M)}L.a.config();var B=W,z=A.a.mark(q);function q(e,t){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("profileSagas"),t.next=3,e.get("http://localhost:4444/api/users/me");case 3:return a=t.sent,console.log("eeeee",a.data),t.next=7,Object(T.a)(D(a.data));case 7:case"end":return t.stop()}},z)}L.a.config();var V=q,H=A.a.mark(Y);function Y(e,t){var a;return A.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.get("http://localhost:4444/api/files/");case 2:return a=t.sent,console.log(a.data),t.next=6,Object(T.a)(N(a.data));case 6:case"end":return t.stop()}},H)}L.a.config();var Q=Y,G=A.a.mark(J);function J(e){var t;return A.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,e.get("http://localhost:4444/api/files/");case 2:return t=a.sent,console.log(t.data),a.next=6,Object(T.a)(I(t.data));case 6:case"end":return a.stop()}},G)}L.a.config();var X=J,$=A.a.mark(K);function K(e,t){var a;return A.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.get("http://localhost:4444/api/comments/file/"+t.file_id);case 2:return a=n.sent,n.next=5,Object(T.a)(P(a.data,t.file_id));case 5:case"end":return n.stop()}},$)}L.a.config();var Z=K,ee=a(19),te=a.n(ee),ae=A.a.mark(ne);function ne(){return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(T.b)("LOAD_USERS_REQUEST",B,te.a);case 2:return e.next=4,Object(T.b)("LOAD_PROFILE_REQUEST",V,te.a);case 4:return e.next=6,Object(T.b)("LOAD_ADMIN_EXAMS_REQUEST",X,te.a);case 6:return e.next=8,Object(T.b)("LOAD_EXAMS_REQUEST",Q,te.a);case 8:return e.next=10,Object(T.b)("LOAD_CHATDIALOG_REQUEST",Z,te.a);case 10:case"end":return e.stop()}},ae)}var re=ne,ie=Object(k.a)(),se=Object(m.e)(R,{},Object(m.d)(Object(m.a)(u.a,ie)));ie.run(re);var oe=se,le=a(142),ce=a.n(le),de=function(e){e?te.a.defaults.headers.common.Authorization=e:delete te.a.defaults.headers.common.Authorization};L.a.config();var me=function(e){return{type:"SET_CURRENT_USER",payload:e}},ue=function(e){return function(t){localStorage.removeItem("jwtToken"),de(!1),t(me({})),e.push("/login")}},pe=a(25),he=a(26),ge=a(29),fe=a(27),Ee=a(28),ve=a(17),be=a(410),ye=a(458),Se=a(209),Ce=a(90),Oe=a(205),je=a(457),xe=a(3),we=a(75),Re=a(466),ke=a(445),Fe=a(459),Ae=a(207),Te=a(179),_e=a.n(Te),De=a(254),Ie=a.n(De),Ne=a(253),Pe=a.n(Ne),Ue=a(409),Le=a(460),Me=a(224),We=a(256),Be=a.n(We),ze=a(186),qe=a.n(ze),Ve=a(187),He=a.n(Ve),Ye=a(125),Qe=a.n(Ye),Ge=a(255),Je=a.n(Ge),Xe=a(11),$e=a(4),Ke=a.n($e),Ze=a(176),et=a(204),tt=a(229),at=a(202),nt=a(231),rt=a(203),it=a(446),st=a(441),ot=a(447),lt=a(442),ct=a(440),dt=a(206),mt=function(e){function t(){var e;return Object(pe.a)(this,t),(e=Object(ge.a)(this,Object(fe.a)(t).call(this))).state={username:"",type:0,completename:"",cpf:"",address:"",crmv:"",technicalSupport:"",phone:"",errors:{},isFetching:!1},e.handleInputChange=e.handleInputChange.bind(Object(Xe.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Xe.a)(e)),e.handleSelectTypeChange=e.handleSelectTypeChange.bind(Object(Xe.a)(e)),e}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"handleSelectTypeChange",value:function(e){console.log("e ",e),this.setState({type:e.target.value})}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={username:this.state.username,type:this.state.type,completename:this.state.completename,cpf:this.state.cpf,address:this.state.address,phone:this.state.phone,crmv:this.state.crmv,technicalSupport:this.state.technicalSupport};this.setState({isFetching:!0}),this.props.registerUser(t,this.props.history)}},{key:"componentWillReceiveProps",value:function(e){if(e.auth.isAuthenticated,this.setState({isFetching:!1}),e.errors){var t=e.errors.errors;console.log(t);var a={};if(t&&t.length){for(var n=0;n<t.length;n++)console.log(t[n].param),"username"===t[n].param?a.username=t[n].msg:"password"===t[n].param?a.password=t[n].msg:"confirmPassword"===t[n].param?a.confirmPassword=t[n].msg:"type"===t[n].param&&(a.type=t[n].msg);console.log(a),this.setState({errors:a})}}}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&!this.props.auth.user.admin&&this.props.history.push("/")}},{key:"render",value:function(){var e=this.state.errors,t=ut();return r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh",marginTop:50}},r.a.createElement(ct.a,{item:!0,xs:5},r.a.createElement(st.a,{className:t.card},r.a.createElement(lt.a,null,r.a.createElement(Ce.a,{variant:"h5",component:"h2"},"Casdastrar novo usu\xe1rio"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"type-error"},"Tipo de Usu\xe1rio"),r.a.createElement(tt.a,{value:this.state.type,onChange:this.handleSelectTypeChange,name:"type"},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Escolha tipo de usu\xe1rio")),r.a.createElement(et.a,{value:1},"Cliente"),r.a.createElement(et.a,{value:2},"Cl\xednica"),r.a.createElement(et.a,{value:3},"Veterin\xe1rio"),r.a.createElement(et.a,{value:4},"Administrador")),e.type&&r.a.createElement(it.a,{id:"type-text",style:{color:"red"}},e.type)),r.a.createElement(at.a,{className:t.formControl,fullWidth:!0,margin:Ke.a.margin},r.a.createElement(nt.a,{htmlFor:"username"},"E-mail"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},"value",this.state.username)),e.username&&r.a.createElement(it.a,{id:"username-text",style:{color:"red"}},e.username)),r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"completename"},"Nome Completo"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"completename",value:this.state.completename,name:"completename",onChange:this.handleInputChange,"aria-describedby":"completename-text"},"value",this.state.completename)),e.completename&&r.a.createElement(it.a,{id:"completename-text",style:{color:"red"}},e.completename)),r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"cpf"},"CPF/CNPJ"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"cpf",value:this.state.cpf,name:"cpf",onChange:this.handleInputChange,"aria-describedby":"cpf-text"},"value",this.state.cpf)),e.cpf&&r.a.createElement(it.a,{id:"cpf-text",style:{color:"red"}},e.cpf)),3!=this.state.type&&r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"address"},"Endere\xe7o"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"address",value:this.state.address,name:"address",onChange:this.handleInputChange,"aria-describedby":"address-text"},"value",this.state.address)),e.address&&r.a.createElement(it.a,{id:"address-text",style:{color:"red"}},e.address)),r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"phone"},"Telephone de Contato"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"phone",value:this.state.phone,name:"phone",onChange:this.handleInputChange,"aria-describedby":"phone-text"},"value",this.state.phone)),e.phone&&r.a.createElement(it.a,{id:"phone-text",style:{color:"red"}},e.phone)),(2==this.state.type||3==this.state.type)&&r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"crmv"},"CRMV"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"crmv",value:this.state.crmv,name:"crmv",onChange:this.handleInputChange,"aria-describedby":"crmv-text"},"value",this.state.crmv)),e.crmv&&r.a.createElement(it.a,{id:"crmv-text",style:{color:"red"}},e.crmv)),2==this.state.type&&r.a.createElement(at.a,{className:t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"technicalSupport"},"Respons\xe1vel Tecnico"),r.a.createElement(rt.a,Object(ve.a)({type:"text",id:"technicalSupport",value:this.state.technicalSupport,name:"technicalSupport",onChange:this.handleInputChange,"aria-describedby":"technicalSupport-text"},"value",this.state.technicalSupport)),e.technicalSupport&&r.a.createElement(it.a,{id:"technicalSupport-text",style:{color:"red"}},e.technicalSupport)),r.a.createElement(ot.a,null,!this.state.isFetching&&r.a.createElement(Oe.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Cadastrar"),this.state.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(dt.a,null))))))))}}]),t}(n.Component),ut=function(e){return{button:{},input:{display:"none"},formControl:{marginTop:200}}},pt=Object(d.b)(function(e){return{auth:e.auth,errors:e.errors}},{registerUser:function(e,t){return function(a){localStorage.getItem("jwtToken")?(te.a.defaults.headers.common.Authorization=localStorage.getItem("jwtToken"),console.log(te.a.defaults.headers.common.Authorization),te.a.post("http://localhost:4444/api/users/register",e).then(function(e){return t.push("/users?registrationSucessfull=true")}).catch(function(e){console.log(JSON.stringify(e.response)),a({type:"GET_ERRORS",payload:e.response.data})})):t.push("/login")}}})(Object(c.e)(mt),Object(Ze.a)(ut)),ht=a(104),gt=a.n(ht),ft=a(71),Et=a.n(ft),vt=a(232),bt=a(408);L.a.config();var yt=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={collapse:!0},a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(dt.a,null)),!this.props.isFetching&&r.a.createElement(bt.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement("div",{style:{flex:1,alignContent:"center",margin:10}},r.a.createElement(Oe.a,{onClick:function(){e.setState({collapse:!e.state.collapse})}},this.state.collapse?"Ver todas Colunas":"Ocultar Colunas")),r.a.createElement(gt.a,{title:"Usu\xe1rios",columns:this.state.collapse?Ot:Ct,data:this.props.users,editable:{onRowUpdate:function(t,a){return new Promise(function(n,r){e.state.collapse?(alert("Habilite todas as colunas para realizar essa a\xe7\xe3o"),n()):te.a.patch("http://localhost:4444/api/users/"+a._id,t).then(function(t){e.props.loadUsers(),n()}).catch(function(e){r()})})},onRowDelete:function(e){return new Promise(function(e,t){setTimeout(function(){alert("op\xe7\xe3o n\xe3o habilitada"),e()},1e3)})}},detailPanel:[{tooltip:"Ver Exames",render:function(t){return r.a.createElement(bt.a,Object.assign({in:!e.props.isFetching,style:{transformOrigin:"0 0 0"}},e.props.isFetching?{}:{timeout:1e3}),r.a.createElement("div",{style:{fontSize:100,textAlign:"center",color:"white",backgroundColor:"#43A047",padding:20}},r.a.createElement(gt.a,{title:"Exames",columns:jt,data:t.files,actions:[{icon:"remove_red_eye",tooltip:"Visualizar Arquivo",onClick:function(e,t){te()("http://localhost:4444/api/files/"+t._id,{method:"GET",responseType:"blob"}).then(function(e){var a=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(a),r=document.createElement("a");r.download=t.displayName+"."+t.type,r.href=n,r.click()}).catch(function(e){console.log(e)})}}],editable:{onRowDelete:function(t){return new Promise(function(a,n){te.a.delete("http://localhost:4444/api/files/"+t._id).then(function(t){e.props.loadAdminExams(),a(t)}).catch(function(e){n(e)})})}},options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Lista de Exames"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o exame?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))}}],options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Usuarios"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o usu\xe1rio?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))))}}]),t}(n.Component);function St(e){return Et()(e).format("DD/MM/YYYY hh:mm A")}var Ct=[{title:"E-mail",field:"username"},{title:"Nome",field:"completename"},{title:"Tipo",field:"type",lookup:{1:"Cliente",2:"Cl\xednica",3:"Veterin\xe1rio",4:"Admin"}},{title:"CPF/CNPJ",field:"cpf"},{title:"Endere\xe7o",field:"address"},{title:"Atividade",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:St(e.lastActivity)},r.a.createElement("div",null," ",(t=e.lastActivity,Et()(t).format("DD/MM/YY"))));var t}},{title:"Fone",field:"phone"},{title:"Respons\xe1vel  Tecnico",field:"technicalSupport"},{title:"CRMV",field:"crmv"}],Ot=[{title:"Nome",field:"completename"},{title:"Tipo",field:"type",lookup:{1:"Cliente",2:"Cl\xednica",3:"Veterin\xe1rio",4:"Admin"}},{title:"Atividade",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:St(e.lastActivity)},r.a.createElement("div",null," ",St(e.lastActivity)))}}],jt=[{title:"Nome",field:"displayName"},{title:"Tipo",field:"type"},{title:"Lido",field:"read",type:"boolean"},{title:"Data subida",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:St(e.lastActivity)},r.a.createElement("div",null," ",St(e.lastActivity)))}}],xt=Object(d.b)(function(e){return{isFetching:e.users.isFetching,users:e.users.data,error:e.users.error}},function(e){return{loadUsers:function(){return e({type:"LOAD_USERS_REQUEST"})}}})(yt),wt=a(260),Rt=a(462),kt=a(463),Ft=a(451),At=a(115);L.a.config();var Tt=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={isEditing:!1,tab:0,errors:!1,message:!1,isSaving:!1,password:"",confirmPassword:""},a.handleTabsChange=a.handleTabsChange.bind(Object(Xe.a)(a)),a.changeToEditProfile=a.changeToEditProfile.bind(Object(Xe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(Xe.a)(a)),a.saveProfile=a.saveProfile.bind(Object(Xe.a)(a)),a.postPassword=a.postPassword.bind(Object(Xe.a)(a)),a.handleInputPasswordChange=a.handleInputPasswordChange.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){this.props.loadProfile()}},{key:"postPassword",value:function(){var e=this;this.state.password&&this.state.confirmPassword?this.state.password.length<6?this.setState({errors:"A senha deve ter minimo 6 carateres"}):this.state.password!=this.state.confirmPassword?this.setState({errors:"A senhas n\xe3o coincidem"}):(this.setState({isSaving:!0}),te.a.post("http://localhost:4444/api/users/reset_password",{password:this.state.password,confirmPassword:this.state.confirmPassword}).then(function(t){e.setState({password:"",confirmPassword:"",isSaving:!1,message:"Sua senha foi redefinida com sucesso"})}).catch(function(t){t&&t.response&&e.setState({errors:JSON.stringify(t.response),isSaving:!1})})):this.setState({errors:"Por favor, escrever senha e confirmar a mesma"})}},{key:"saveProfile",value:function(){var e=this;this.setState({isSaving:!0}),te.a.post("http://localhost:4444/api/users/me",this.props.profile).then(function(t){e.props.profile.address=t.data.address,e.props.profile.cpf=t.data.cpf,e.props.profile.completename=t.data.completename,e.setState({isSaving:!1,isEditing:!1})}).catch(function(t){e.setState({errors:JSON.stringify(t.response)})})}},{key:"handleInputChange",value:function(e){var t=e.target.name;this.props.profile[t]=e.target.value,this.setState({})}},{key:"handleInputPasswordChange",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"handleSelectTypeChange",value:function(e){this.setState({type:e.target.value})}},{key:"handleSubmitProfile",value:function(e){e.preventDefault()}},{key:"handleTabsChange",value:function(e,t){this.setState({tab:t})}},{key:"changeToEditProfile",value:function(){this.setState({isEditing:!0})}},{key:"render",value:function(){var e;return r.a.createElement("div",{style:{marginTop:80,marginLeft:30,width:"100%",height:"100%",flex:1,justifyContent:"center",alignContent:"center"}},r.a.createElement(Ce.a,null,"Meu Perfil"),r.a.createElement(At.a,{style:{marginTop:10,width:"70%"}},r.a.createElement(kt.a,{value:this.state.tab,onChange:this.handleTabsChange,"aria-label":"Meu Perfil"},r.a.createElement(Ft.a,Object.assign({label:"Detalhes Conta"},It(0))),r.a.createElement(Ft.a,Object.assign({label:"Modificar Senha"},It(1)))),r.a.createElement(Dt,{value:this.state.tab,index:0},!this.props.isFetching&&r.a.createElement("form",{onSubmit:this.handleSubmitProfile},r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"type-error"},"Tipo de Usu\xe1rio"),r.a.createElement(tt.a,{value:this.props.profile.type,onChange:this.handleSelectTypeChange,name:"type",disabled:!0},r.a.createElement(et.a,{value:0},r.a.createElement("em",null,"Escolha tipo de usu\xe1rio")),r.a.createElement(et.a,{value:1},"Cliente"),r.a.createElement(et.a,{value:2},"Cl\xednica"),r.a.createElement(et.a,{value:3},"Veterin\xe1rio"),r.a.createElement(et.a,{value:4},"Administrador"))),r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0,margin:Ke.a.margin},r.a.createElement(nt.a,{htmlFor:"username"},"E-mail"),r.a.createElement(rt.a,(e={type:"text",id:"username",name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(ve.a)(e,"onChange",this.handleInputChange),Object(ve.a)(e,"value",this.props.profile.username),Object(ve.a)(e,"disabled",!0),e))),r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"completename"},"Nome Completo"),r.a.createElement(rt.a,{type:"text",id:"completename",name:"completename",onChange:this.handleInputChange,"aria-describedby":"completename-text",value:this.props.profile.completename,disabled:!this.state.isEditing}),this.props.error.completename&&r.a.createElement(it.a,{id:"completename-text"},this.props.error.completename)),r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"cpf"},"CPF/CNPJ"),r.a.createElement(rt.a,{type:"text",id:"cpf",name:"cpf","aria-describedby":"cpf-text",onChange:this.handleInputChange,value:this.props.profile.cpf,disabled:!this.state.isEditing}),this.props.error.cpf&&r.a.createElement(it.a,{id:"cpf-text"},this.props.error.cpf)),r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"address"},"Endere\xe7o"),r.a.createElement(rt.a,{type:"text",id:"address",name:"address","aria-describedby":"address-text",onChange:this.handleInputChange,value:this.props.profile.address,disabled:!this.state.isEditing}),this.props.error.address&&r.a.createElement(it.a,{id:"address-text"},this.props.error.address)),r.a.createElement(ot.a,null,!this.state.isSaving&&!this.state.isEditing&&r.a.createElement(Oe.a,{onClick:this.changeToEditProfile,fullWidth:!0,variant:"outlined",color:"primary",type:"submit"},"Modificar Perfil"),!this.state.isSaving&&this.state.isEditing&&r.a.createElement(Oe.a,{onClick:this.saveProfile,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Salvar"),this.state.isSaving&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(dt.a,null))))),r.a.createElement(Dt,{value:this.state.tab,index:1},!this.props.isFetching&&r.a.createElement("form",{onSubmit:this.handleSubmitProfile},r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0,margin:Ke.a.margin},r.a.createElement(nt.a,{htmlFor:"password"},"Nova senha"),r.a.createElement(rt.a,{type:"password",id:"password",name:"password",onChange:this.handleInputPasswordChange,"aria-describedby":"password-text",value:this.state.password})),r.a.createElement(at.a,{className:_t.formControl,fullWidth:!0,margin:Ke.a.margin},r.a.createElement(nt.a,{htmlFor:"confirmPassword"},"Confirmar Nova senha"),r.a.createElement(rt.a,{type:"password",id:"confirmPassword",name:"confirmPassword",onChange:this.handleInputPasswordChange,"aria-describedby":"confirmPassword-text",value:this.state.confirmPassword})),this.state.errors&&r.a.createElement(it.a,{id:"password-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement(it.a,{id:"password-text",style:{color:"green"}},this.state.message),r.a.createElement(ot.a,null,!this.state.isSaving&&r.a.createElement(Oe.a,{onClick:this.postPassword,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Redefinir Senha"),this.state.isSaving&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(dt.a,null)))))))}}]),t}(n.Component),_t={};function Dt(e){var t=e.children,a=e.value,n=e.index,i=Object(wt.a)(e,["children","value","index"]);return r.a.createElement(Ce.a,Object.assign({component:"div",role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},i),r.a.createElement(Rt.a,{p:3},t))}function It(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var Nt=Object(d.b)(function(e){return{isFetching:e.profile.isFetching,profile:e.profile.data,error:e.profile.error}},function(e){return{loadProfile:function(){return e({type:"LOAD_PROFILE_REQUEST"})}}})(Tt),Pt=a(455),Ut=a(67),Lt=a.n(Ut),Mt=a(448),Wt=a(449),Bt=a(454),zt=a(246),qt=a.n(zt),Vt=a(450),Ht=a(247),Yt=a.n(Ht),Qt=a(230),Gt=a(392),Jt=a(245),Xt=a.n(Jt),$t=a(452),Kt=a(453);L.a.config();var Zt=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).trackScrolling=function(){var e=document.getElementById("messages-container");console.log("scrooling"),a.isBottom(e)&&(a.state.noReadMessageTag&&!a.state.noReadSendToServer&&a.postMessagesRead(),document.getElementById("messages-container")&&document.getElementById("messages-container").addEventListener("scroll",a.trackScrolling,!1))},a.state={openDialog:!0,scroll:"paper",message:"",noReadMessageTag:!1,noReadSendToServer:!1,maxChatRefresh:10,refreshIntervalTime:15e3,chatRefreshInterval:!1,currentChatRefresh:0},a.renderMessage=a.renderMessage.bind(Object(Xe.a)(a)),a.handleClose=a.handleClose.bind(Object(Xe.a)(a)),a.handleMessageChange=a.handleMessageChange.bind(Object(Xe.a)(a)),a.postMessage=a.postMessage.bind(Object(Xe.a)(a)),a.getMessages=a.getMessages.bind(Object(Xe.a)(a)),a.messagesEndRef=r.a.createRef(),a.messagesNoReadRef=r.a.createRef(),a.messagesList=r.a.createRef(),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){this.props.loadChatDialogExams(this.props.file._id)}},{key:"componentDidUpdate",value:function(){this.messagesNoReadRef&&this.messagesNoReadRef.current?document.getElementById("messages-container")&&(document.getElementById("messages-container").addEventListener("scroll",this.trackScrolling,!1),this.messagesNoReadRef.current.scrollIntoView({behavior:"smooth"}),this.props&&this.props.comments&&this.props.comments&&this.props.comments.length<4&&!this.state.noReadSendToServer&&this.postMessagesRead()):this.messagesEndRef&&this.messagesEndRef.current&&this.messagesEndRef.current.scrollIntoView({behavior:"smooth"}),this.state.chatRefreshInterval||(this.state.chatRefreshInterval=setInterval(this.getMessages,this.state.refreshIntervalTime))}},{key:"getMessages",value:function(){var e=this;console.log("getMessages!"),te.a.get("http://localhost:4444/api/comments/file/"+this.props.file._id).then(function(t){var a=t.data;if(a&&a.length>e.props.comments.length){var n=[];a.forEach(function(t){var a=!1;e.props.comments.forEach(function(e){t._id===e._id&&(a=!0)}),a||n.push(t)}),n.forEach(function(t){e.props.comments.push(t)}),e.state.noReadMessageTag=!1,e.state.noReadSendToServer=!1}e.setState({currentChatRefresh:e.state.currentChatRefresh++}),e.state.currentChatRefresh>=e.state.maxChatRefresh&&(clearInterval(e.state.chatRefreshInterval),e.setState({chatRefreshInterval:!1}),console.log("clearInterval because -> this.state.currentChatRefresh >= this.state.maxChatRefresh"))}).catch(function(t){clearInterval(e.state.chatRefreshInterval),e.setState({chatRefreshInterval:!1}),console.log("clearInterval because ERROR",JSON.stringify(t))})}},{key:"componentWillReceiveProps",value:function(e){}},{key:"isBottom",value:function(e){if(e)return console.log("element.clientHeight",e.clientHeight),console.log("element.scrollHeight - element.scrollTop",e.scrollHeight-e.scrollTop),Math.abs(e.scrollHeight-e.scrollTop-e.clientHeight)<60;console.log("in the scrolling element doesnt exist !!!!!!!")}},{key:"componentWillUnmount",value:function(){document.getElementById("messages-container")&&document.getElementById("messages-container").removeEventListener("scroll",this.trackScrolling),clearInterval(this.state.chatRefreshInterval),this.setState({chatRefreshInterval:!1}),console.log("clearInterval because UNMOUNT")}},{key:"handleClose",value:function(){this.setState({openDialog:!1,noReadMessageTag:!1}),this.props.removeDialog()}},{key:"handleMessageChange",value:function(e){this.setState({message:e.target.value})}},{key:"postMessagesRead",value:function(){var e=this;console.log("postMessagesRead"),te.a.patch("http://localhost:4444/api/comments/read/file/"+this.props.file._id,{}).then(function(t){e.setState({noReadSendToServer:!0}),t&&t.data&&e.props.updateFile(t.data)}).catch(function(e){console.log("error trying to update as read messages")})}},{key:"renderMessage",value:function(e,t){var a,n=this;this.props.classes;return console.log(null==e),r.a.createElement("div",{key:e._id},!this.state.noReadMessageTag&&!e.read&&e.sender._id!=this.props.auth.user._id&&r.a.createElement(Ue.a,{style:{width:"100%"},ref:this.messagesNoReadRef},r.a.createElement(st.a,{style:{marginLeft:"auto",marginRight:"auto",background:$t.a[10]}},r.a.createElement("span",{style:{fontSize:10,marginTop:-5,marginLeft:5,marginRight:5}},"Mensagens n\xe3o lidas"))),r.a.createElement(bt.a,Object.assign({in:!0,style:{transformOrigin:"0 0 0"}},{timeout:1e3}),r.a.createElement(Ue.a,{style:{width:"100%"}},r.a.createElement("span",{style:{marginLeft:e.sender._id===this.props.auth.user._id?"":"auto"}},e.sender.admin&&r.a.createElement(Ae.a,{style:{float:e.sender._id===this.props.auth.user._id?"left":"right"},onClick:function(){console.log("comment.sender._id",e.sender._id),console.log("this.props.auth.user._id",n.props.auth.user._id)}},r.a.createElement(Gt.a,{"aria-label":"Recipe",style:{color:"#fff",backgroundColor:$t.a[500]}},r.a.createElement(Xt.a,null))),!e.sender.admin&&r.a.createElement(Ae.a,{style:{float:e.sender._id===this.props.auth.user._id?"left":"right"},onClick:function(){}},r.a.createElement(Gt.a,{style:{color:"#fff",backgroundColor:Kt.a[500]}},e.sender.completename&&e.sender.completename.length&&e.sender.completename.length>0?e.sender.completename.substring(0,1):e.sender.username.substring(0,1))),r.a.createElement(st.a,{style:{background:e.sender.admin?$t.a[50]:"white"}},r.a.createElement(lt.a,null,r.a.createElement("div",null,r.a.createElement("span",{style:{fontSize:11,float:"left",marginRight:10}},e.sender.completename),"   ",r.a.createElement("span",{style:{fontSize:10,float:"left",color:"gray"}},(a=e.sentTime,Et()(a).format("DD/MM/YYYY hh:mm A")))),r.a.createElement(Ce.a,{variant:"body2",component:"p",style:{marginTop:20}},e.message)))))),!this.state.noReadMessageTag&&!e.read&&e.sender._id!=this.props.auth.user._id&&(this.state.noReadMessageTag=!0))}},{key:"postMessage",value:function(){var e=this;if(this.state.message&&this.state.message.length>0){var t={message:this.state.message,file:this.props.file._id,sender:this.props.auth.user._id,receiver:this.props.auth.user._id===this.props.file.user._id?this.props.file.admin._id:this.props.file.user._id};this.setState({message:""}),te.a.post("http://localhost:4444/api/comments/file/"+this.props.file._id,t).then(function(t){e.props.loadChatDialogExams(e.props.file._id)}).catch(function(e){alert("error")})}}},{key:"render",value:function(){return r.a.createElement(Mt.a,{fullScreen:!1,fullWidth:!0,maxWidth:"lg",style:{height:"90% !important"},open:this.state.openDialog,scroll:this.state.scroll,onClose:this.handleClose,"aria-labelledby":"scroll-dialog-title"},r.a.createElement(Bt.a,{id:"scroll-dialog-title"},"Messagens do exame: ",this.props.file.displayName,r.a.createElement(Ae.a,{edge:"end",color:"inherit",onClick:this.handleClose,"aria-label":"close",style:{float:"right"}},r.a.createElement(qt.a,null))),r.a.createElement(Wt.a,{dividers:"paper"===this.state.scroll,style:{background:"#eee"},id:"messages-container"},r.a.createElement(ke.a,{style:{width:"100%",minHeight:310,margin:10},ref:this.messagesList},this.state.noReadMessageTag=!1,this.props.comments&&this.props.comments.length>0&&this.props.comments.map(this.renderMessage),r.a.createElement(Ue.a,{ref:this.messagesEndRef,onBlur:function(){console.log("focused")}}))),r.a.createElement(Vt.a,{style:{paddingLeft:25,paddingRight:25}},r.a.createElement(Qt.a,{label:"Fa\xe7a sua pergunta...",multiline:!0,rowsMax:"3",value:this.state.message,onChange:this.handleMessageChange,margin:"normal",variant:"outlined",fullWidth:!0}),r.a.createElement(Ae.a,{edge:"end",color:"inherit",onClick:this.postMessage,style:{float:"right"}},r.a.createElement(Yt.a,null))))}}]),t}(n.Component);var ea=Object(d.b)(function(e){return{isFetching:e.chatDialog.isFetching,comments:e.chatDialog.data,error:e.chatDialog.error,auth:e.auth}},function(e){return{loadChatDialogExams:function(t){return e(function(e){return{type:"LOAD_CHATDIALOG_REQUEST",file_id:e}}(t))}}})(Zt);L.a.config();var ta=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={currentDialog:null},a.removeDialog=a.removeDialog.bind(Object(Xe.a)(a)),a.updateFile=a.updateFile.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"updateFile",value:function(e){console.log("updateFile",JSON.stringify(e));for(var t=0;t<this.props.exams.length;t++)this.props.exams[t]._id===e._id&&(this.props.exams[t]=e,console.log("coinciden! intento cambiar! despues del cambio...",this.props.exams[t]));this.setState({})}},{key:"componentDidMount",value:function(){this.props.loadExams()}},{key:"removeDialog",value:function(){this.setState({currentDialog:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(dt.a,null)),!this.props.isFetching&&r.a.createElement(bt.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement(gt.a,{title:"Exames",columns:la,data:this.props.exams,actions:[{icon:"remove_red_eye",tooltip:"Visualizar Arquivo",onClick:function(e,t){te()("http://localhost:4444/api/files/"+t._id,{method:"GET",responseType:"blob"}).then(function(e){var a=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(a),r=document.createElement("a");r.download=t.displayName+"."+t.type,r.href=n,r.click()}).catch(function(e){console.log(e)})}},function(t){return{icon:t.commentsEnabled?0!==t.customerNoReadCommentsCount&&t.customerNoReadCommentsCount?1===t.customerNoReadCommentsCount?na:2===t.customerNoReadCommentsCount?ra:3===t.customerNoReadCommentsCount?ia:sa:aa:"",tooltip:t.commentsEnabled?"Mensagens":"",onClick:function(t,a){e.setState({currentDialog:r.a.createElement(ea,{updateFile:e.updateFile,file:a,removeDialog:e.removeDialog})})},disabled:!t.commentsEnabled}}],options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Lista de Exames",rowStyle:function(e){return e.read?{backgroundColor:"#EEE"}:{backgroundColor:"white"}}},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o exame?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))),r.a.createElement("div",null,this.state.currentDialog))}}]),t}(n.Component),aa=function(){return r.a.createElement(Pt.a,{color:"primary"},r.a.createElement(Lt.a,null))},na=function(){return r.a.createElement(Pt.a,{badgeContent:1,color:"primary"},r.a.createElement(Lt.a,null))},ra=function(){return r.a.createElement(Pt.a,{badgeContent:2,color:"primary"},r.a.createElement(Lt.a,null))},ia=function(){return r.a.createElement(Pt.a,{badgeContent:3,color:"primary"},r.a.createElement(Lt.a,null))},sa=function(){return r.a.createElement(Pt.a,{badgeContent:"+3",color:"primary"},r.a.createElement(Lt.a,null))};function oa(e){return Et()(e).format("DD/MM/YYYY hh:mm A")}var la=[{title:"Nome",field:"displayName"},{title:"Tipo",field:"type"},{title:"Lido",field:"read",type:"boolean"},{title:"Data subida",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:oa(e.lastActivity)},r.a.createElement("div",null," ",oa(e.lastActivity)))}}],ca=Object(d.b)(function(e){return{isFetching:e.exams.isFetching,exams:e.exams.data,error:e.exams.error}},function(e){return{loadExams:function(){return e({type:"LOAD_EXAMS_REQUEST"})}}})(ta);L.a.config();var da=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={},a.removeDialog=a.removeDialog.bind(Object(Xe.a)(a)),a.updateFile=a.updateFile.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"updateFile",value:function(e){console.log("updateFile",JSON.stringify(e));for(var t=0;t<this.props.adminExams.length;t++)this.props.adminExams[t]._id===e._id&&(this.props.adminExams[t]=e,console.log("coinciden! intento cambiar! despues del cambio...",this.props.adminExams[t]));this.setState({})}},{key:"componentDidMount",value:function(){this.props.loadAdminExams()}},{key:"removeDialog",value:function(){this.setState({currentDialog:null})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{marginLeft:10,marginTop:40,width:"100%",height:"100%"}},this.props.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{flex:1,marginTop:100,justifyContent:"center",alignContent:"center",alignItems:"center"}},r.a.createElement(dt.a,null)),!this.props.isFetching&&r.a.createElement(bt.a,Object.assign({in:!this.props.isFetching,style:{transformOrigin:"0 0 0"}},this.props.isFetching?{}:{timeout:1e3}),r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:12},r.a.createElement(gt.a,{title:"Exames",columns:va,data:this.props.adminExams,actions:[{icon:"remove_red_eye",tooltip:"Visualizar Arquivo",onClick:function(e,t){te()("http://localhost:4444/api/files/"+t._id,{method:"GET",responseType:"blob"}).then(function(e){var a=new Blob([e.data],{type:"application/pdf"}),n=URL.createObjectURL(a),r=document.createElement("a");r.download=t.displayName+"."+t.type,r.href=n,r.click()}).catch(function(e){console.log(e)})}},function(t){return{icon:t.commentsEnabled?0!==t.adminNoReadCommentsCount&&t.adminNoReadCommentsCount?1===t.adminNoReadCommentsCount?ua:2===t.adminNoReadCommentsCount?pa:3===t.adminNoReadCommentsCount?ha:ga:ma:"",tooltip:t.commentsEnabled?"Mensagens":"",onClick:function(t,a){e.setState({currentDialog:r.a.createElement(ea,{updateFile:e.updateFile,file:a,removeDialog:e.removeDialog})})},disabled:!t.commentsEnabled}}],components:[{Action:function(e){return r.a.createElement(Oe.a,{onClick:function(t){return e.action.onClick(t,e.data)},color:"primary",variant:"contained",style:{textTransform:"none"},size:"small"},"Olhar")}},{Action:function(e){return r.a.createElement(Oe.a,{onClick:function(t){return e.action.onClick(t,e.data)},color:"primary",variant:"contained",style:{textTransform:"none"},size:"small"},"Deletar")}}],editable:{onRowDelete:function(t){return new Promise(function(a,n){te.a.delete("http://localhost:4444/api/files/"+t._id).then(function(t){e.props.loadAdminExams(),a(t)}).catch(function(e){n(e)})})}},options:{actionsColumnIndex:-1,exportButton:!0,exportFileName:"Lista de Exames"},localization:{header:{actions:"A\xe7\xf5es"},body:{emptyDataSourceMessage:"Sem dados para mostrar",editRow:{deleteText:"Tem certeza que quer deletar o exame?"}},toolbar:{searchTooltip:"Procurar",searchPlaceholder:"Procurar",exportTitle:"Exportar CSV",exportAriaLabel:"Exportar CSV",exportName:"Exportar CSV"},pagination:{labelRowsSelect:"Filas",labelDisplayedRows:"{count} de {from}-{to} ",firstTooltip:"Primeira",previousTooltip:"Anterior",nextTooltip:"Seguinte",lastTooltip:"\xdaltima P\xe1gina"}}})))),r.a.createElement("div",null,this.state.currentDialog))}}]),t}(n.Component),ma=function(){return r.a.createElement(Pt.a,{color:"primary"},r.a.createElement(Lt.a,null))},ua=function(){return r.a.createElement(Pt.a,{badgeContent:1,color:"primary"},r.a.createElement(Lt.a,null))},pa=function(){return r.a.createElement(Pt.a,{badgeContent:2,color:"primary"},r.a.createElement(Lt.a,null))},ha=function(){return r.a.createElement(Pt.a,{badgeContent:3,color:"primary"},r.a.createElement(Lt.a,null))},ga=function(){return r.a.createElement(Pt.a,{badgeContent:"+3",color:"primary"},r.a.createElement(Lt.a,null))};function fa(e){return null!=e?Et()(e).format("DD/MM/YY"):"-"}function Ea(e){return null!=e?Et()(e).format("DD/MM/YYYY hh:mm A"):"-"}var va=[{title:"Nome",field:"displayName"},{title:"Subido",field:"lastActivity",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:Ea(e.lastActivity)},r.a.createElement("div",null," ",fa(e.lastActivity)))}},{title:"Usu\xe1rio",field:"user.completename"},{title:"Lido",field:"read",type:"boolean"},{title:"Arquivo lido",field:"lastRead",type:"datetime",render:function(e){return r.a.createElement(vt.a,{title:Ea(e.lastRead)},r.a.createElement("div",null," ",fa(e.lastRead)))}},{title:"Mensagens",field:"commentsEnabled",type:"boolean"},{title:"Msgs N\xe3o lidas",field:"adminNoReadCommentsCount"}],ba=Object(d.b)(function(e){return{isFetching:e.adminExams.isFetching,adminExams:e.adminExams.data,error:e.adminExams.error}},function(e){return{loadAdminExams:function(){return e({type:"LOAD_ADMIN_EXAMS_REQUEST"})}}})(da),ya=a(248),Sa=(a(393),a(394),a(249)),Ca=a.n(Sa),Oa=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={hightlight:!1},a.fileInputRef=r.a.createRef(),a.openFileDialog=a.openFileDialog.bind(Object(Xe.a)(a)),a.onFilesAdded=a.onFilesAdded.bind(Object(Xe.a)(a)),a.onDragOver=a.onDragOver.bind(Object(Xe.a)(a)),a.onDragLeave=a.onDragLeave.bind(Object(Xe.a)(a)),a.onDrop=a.onDrop.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"openFileDialog",value:function(){this.props.disabled||this.fileInputRef.current.click()}},{key:"onFilesAdded",value:function(e){if(!this.props.disabled){var t=e.target.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}}}},{key:"onDragOver",value:function(e){e.preventDefault(),this.props.disabed||this.setState({hightlight:!0})}},{key:"onDragLeave",value:function(e){this.setState({hightlight:!1})}},{key:"onDrop",value:function(e){if(e.preventDefault(),!this.props.disabed){var t=e.dataTransfer.files;if(this.props.onFilesAdded){var a=this.fileListToArray(t);this.props.onFilesAdded(a)}this.setState({hightlight:!1})}}},{key:"fileListToArray",value:function(e){for(var t=[],a=0;a<e.length;a++)t.push(e.item(a));return t}},{key:"render",value:function(){return r.a.createElement("div",{className:"Dropzone ".concat(this.state.hightlight?"Highlight":""),onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onClick:this.openFileDialog,style:{cursor:this.props.disabled?"default":"pointer"}},r.a.createElement("input",{ref:this.fileInputRef,className:"FileInput",type:"file",accept:"application/pdf",onChange:this.onFilesAdded}),r.a.createElement(Ca.a,null),r.a.createElement("span",null,"Upload Exames "))}}]),t}(n.Component),ja=(a(395),function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={},a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"ProgressBar"},r.a.createElement("div",{className:"Progress",style:{width:this.props.progress+"%"}}))}}]),t}(n.Component)),xa=a(250),wa=a.n(xa),Ra=a(251),ka=a.n(Ra),Fa=a(252),Aa=a.n(Fa);L.a.config();var Ta=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={files:[],uploading:!1,uploadProgress:{},successfullUploaded:!1},a.onFilesAdded=a.onFilesAdded.bind(Object(Xe.a)(a)),a.uploadFiles=a.uploadFiles.bind(Object(Xe.a)(a)),a.sendRequest=a.sendRequest.bind(Object(Xe.a)(a)),a.renderActions=a.renderActions.bind(Object(Xe.a)(a)),a.sendRequest=a.sendRequest.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){console.log(this.props)}},{key:"onFilesAdded",value:function(e){this.setState(function(t){return{files:t.files.concat(e)}})}},{key:"uploadFiles",value:function(){var e=Object(ya.a)(A.a.mark(function e(){var t,a=this;return A.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({uploadProgress:{},uploading:!0}),t=[],this.state.files.forEach(function(e){t.push(a.sendRequest(e))}),e.prev=3,e.next=6,Promise.all(t);case 6:this.setState({successfullUploaded:!0,uploading:!1}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),this.setState({successfullUploaded:!0,uploading:!1});case 12:case"end":return e.stop()}},e,this,[[3,9]])}));return function(){return e.apply(this,arguments)}}()},{key:"sendRequest",value:function(e){var t=this;return new Promise(function(a,n){var r=new FormData;r.append("userId",t.props.data.userId),r.append("displayName",t.props.data.displayName),r.append("commentsEnabled",t.props.data.commentsEnabled),r.append("adminId",t.props.admin._id),r.append("file",e),r.append("size",e.size),console.log("fileee",JSON.stringify(e));var i=!0,s=!1,o=void 0;try{for(var l,c=r.entries()[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var d=l.value;console.log(d[0]+", "+d[1])}}catch(u){s=!0,o=u}finally{try{i||null==c.return||c.return()}finally{if(s)throw o}}var m=t;te()({method:"post",url:"http://localhost:4444/api/files",data:r,config:{headers:{"Content-Type":"multipart/form-data"}},onUploadProgress:function(a){if(a.loaded===100*a.total){var n=Object(h.a)({},t.state.uploadProgress);n[e.name]={state:"done",percentage:100},t.setState({uploadProgress:n})}else{var r=Object(h.a)({},t.state.uploadProgress);r[e.name]={state:"pending",percentage:a.loaded/a.total*100},t.setState({uploadProgress:r})}}}).then(function(t){var a=Object(h.a)({},m.state.uploadProgress);a[e.name]={state:"done",percentage:100},m.setState({uploadProgress:a}),m.props.triggerUploadedFinished(),console.log(t)}).catch(function(e){console.log(JSON.stringify(e.response))})})}},{key:"renderProgress",value:function(e){var t=this.state.uploadProgress[e.name];if(console.log("renderProgress",t),this.state.uploading||this.state.successfullUploaded)return r.a.createElement("div",{className:"ProgressWrapper"},r.a.createElement(ja,{progress:t?t.percentage:0,style:{float:"right"}}),r.a.createElement(wa.a,{style:{opacity:t&&"done"===t.state?.5:0,float:"left",marginLeft:10}}))}},{key:"renderActions",value:function(){var e=this;return this.state.successfullUploaded?r.a.createElement(Oe.a,{onClick:function(){return e.setState({files:[],successfullUploaded:!1})}},"Limpar"):r.a.createElement(Oe.a,{disabled:this.state.files.length<0||this.state.uploading,onClick:this.uploadFiles},"Fazer Upload")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"Upload",style:{padding:20}},r.a.createElement("div",{className:"Content"},r.a.createElement("div",null,r.a.createElement(Oa,{onFilesAdded:this.onFilesAdded,disabled:this.state.uploading||this.state.successfullUploaded})),r.a.createElement("div",{className:"Files"},r.a.createElement(ke.a,null,r.a.createElement(Ue.a,null,r.a.createElement(ka.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(Ce.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},"Arquivo para: ",this.props.data.user.completename)),r.a.createElement(Ue.a,null,r.a.createElement(Aa.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(Ce.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},"Nome do Arquivo: ",this.props.data.displayName.length>0?this.props.data.displayName:"Manter nome original do Arquivo"))),this.state.files.map(function(t){return r.a.createElement("div",{key:t.name,className:"Row"},r.a.createElement(ke.a,null,r.a.createElement(Ue.a,null,r.a.createElement(Qe.a,{style:{float:"left",color:"#2a2a2a",marginRight:5}}),r.a.createElement(Ce.a,{variant:"subtitle1",style:{float:"left",color:"#2a2a2a"}},t.name))),r.a.createElement("br",null),e.renderProgress(t))}))),r.a.createElement("div",{className:"Actions"},this.renderActions()))}}]),t}(n.Component),_a=(a(396),a(467)),Da=a(456),Ia=a(464);L.a.config();var Na=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={user:!1,displayName:"",userId:0,commentsEnabled:!1,activeStep:0,skipped:new Set,steps:a.getSteps(),showStepper:!0,userFilter:"",filteredUsers:[],firstTimeUpdated:!1},a.handleSelectedUser=a.handleSelectedUser.bind(Object(Xe.a)(a)),a.handleNext=a.handleNext.bind(Object(Xe.a)(a)),a.handleBack=a.handleBack.bind(Object(Xe.a)(a)),a.handleSkip=a.handleSkip.bind(Object(Xe.a)(a)),a.handleReset=a.handleReset.bind(Object(Xe.a)(a)),a.getStepContent=a.getStepContent.bind(Object(Xe.a)(a)),a.handledisplayName=a.handledisplayName.bind(Object(Xe.a)(a)),a.triggerUploadedFinished=a.triggerUploadedFinished.bind(Object(Xe.a)(a)),a.handleSelectedCommentsEnabled=a.handleSelectedCommentsEnabled.bind(Object(Xe.a)(a)),a.handleUserFilterChange=a.handleUserFilterChange.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"componentDidMount",value:function(){this.props.loadUsers()}},{key:"handledisplayName",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"componentDidUpdate",value:function(){this.state.firstTimeUpdated||this.props.users&&this.props.users.length>0&&this.setState({firstTimeUpdated:!0,filteredUsers:this.props.users})}},{key:"handleSelectedUser",value:function(e){if(e&&0!=e.target.value){var t="";this.props.users.map(function(a,n){a._id===e.target.value&&(t=a)}),this.setState({userId:e.target.value,user:t})}else this.setState({userNameSelected:!1,userId:0})}},{key:"handleSelectedCommentsEnabled",value:function(e){this.setState({commentsEnabled:e.target.value})}},{key:"getSteps",value:function(){return["Seleciona Usu\xe1rio","Nome para o arquivo","Upload arquivo"]}},{key:"getStepContent",value:function(e){switch(e){case 0:return this.renderSelectUser();case 1:return this.renderdisplayName();case 2:return this.renderUploadFile();default:return"Passo desconhecido, reiniciar pagina"}}},{key:"handleUserFilterChange",value:function(e){var t=[];this.props.users.forEach(function(a){a.completename.toLowerCase().includes(e.target.value.toLowerCase())&&t.push(a)}),this.setState({filteredUsers:t,userFilter:e.target.value})}},{key:"renderSelectUser",value:function(){return r.a.createElement(st.a,{style:{minHeight:300},alignitems:"center",justify:"center"},this.props.isFetchingUsers&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30}},r.a.createElement(dt.a,null)),!this.props.isFetchingUsers&&r.a.createElement("div",null,r.a.createElement(at.a,{style:{marginLeft:50,marginTop:10}},r.a.createElement(Qt.a,{label:"Filtrar Usu\xe1rio",type:"text",id:"userFilter",value:this.state.userFilter,name:"userFilter",onChange:this.handleUserFilterChange,"aria-describedby":"userFilter-text"})),r.a.createElement(at.a,{fullWidth:!0,style:{paddingLeft:50,paddingRight:50,paddingTop:10,paddingBottom:10}},r.a.createElement(tt.a,{native:!0,variant:"outlined",value:this.state.userId,onChange:this.handleSelectedUser},r.a.createElement("option",{value:0}," Escolher Usu\xe1rio "),this.state.filteredUsers.map(function(e,t){return r.a.createElement("option",{key:e._id,value:e._id},e.completename)})),this.state.errors&&r.a.createElement(it.a,{id:"username-text",style:{color:"red"}},this.state.errors))))}},{key:"renderdisplayName",value:function(){return r.a.createElement(st.a,{style:{minHeight:300}},r.a.createElement(at.a,{fullWidth:!0,style:{padding:50}},r.a.createElement(Qt.a,{label:"Nome para o Arquivo",placeholder:"Nome para o Arquivo",helpertext:"Se quiser manter o nome do arquivo original, pode clicar em Pular",margin:"normal",name:"displayName",variant:"outlined",onChange:this.handledisplayName}),this.state.errors&&r.a.createElement(it.a,{id:"username-text",style:{color:"red"}},this.state.errors)),r.a.createElement(at.a,{style:{padding:50}},r.a.createElement(nt.a,{style:{marginLeft:50,minWidth:150}},"Habilitar Bate Papo"),r.a.createElement(tt.a,{style:{marginTop:-27,minWidth:150},value:this.state.commentsEnabled,onChange:this.handleSelectedCommentsEnabled},r.a.createElement(et.a,{value:!1},"N\xe3o"),r.a.createElement(et.a,{value:!0},"Sim"))))}},{key:"renderUploadFile",value:function(){return r.a.createElement(st.a,null,r.a.createElement(Ta,{data:this.state,triggerUploadedFinished:this.triggerUploadedFinished,admin:this.props.auth.user}))}},{key:"isStepOptional",value:function(e){return 1===e}},{key:"isStepSkipped",value:function(e){return this.state.skipped.has(e)}},{key:"handleNext",value:function(){var e=this,t=this.state.skipped;this.isStepSkipped(this.state.activeStep)&&(t=new Set(t.values())).delete(this.state.activeStep),0===this.state.activeStep&&0===this.state.userId?this.setState({errors:"Por favor, escolha um usu\xe1rio da lista"}):1===this.state.activeStep&&0===this.state.displayName.length?this.setState({errors:"Por favor, se quiser manter o nome original clique em Pular"}):1===this.state.activeStep&&this.state.displayName.length>0?te.a.get("http://localhost:4444/api/files/"+this.state.displayName+"/user/"+this.state.userId).then(function(a){e.setState({activeStep:e.state.activeStep+1,errors:!1,newSkipped:t})}).catch(function(t){e.setState({errors:t.response.data.err})}):this.setState({activeStep:this.state.activeStep+1,errors:!1,newSkipped:t})}},{key:"handleBack",value:function(){this.setState({activeStep:this.state.activeStep-1})}},{key:"handleSkip",value:function(){if(!this.isStepOptional(this.state.activeStep))throw new Error("N\xe3o pode pular este passo porque n\xe3o \xe9 opcional.");this.setState({activeStep:this.state.activeStep+1,displayName:""});var e=new Set(this.state.skipped.values());e.add(this.state.activeStep),this.setState({skipped:e})}},{key:"handleReset",value:function(){this.setState({activeStep:0})}},{key:"triggerUploadedFinished",value:function(){this.setState({uploadFinished:!0})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{style:{width:"80%",margin:40,marginTop:100}},this.state.showStepper&&r.a.createElement("div",null,r.a.createElement(_a.a,{activeStep:this.state.activeStep},this.state.steps.map(function(t,a){var n={},i={};return e.isStepOptional(a)&&(i.optional=r.a.createElement(Ce.a,{variant:"caption",component:"span"},"Opcional")),e.isStepSkipped(a)&&(n.completed=!1),r.a.createElement(Da.a,Object.assign({key:t},n),r.a.createElement(Ia.a,i,t))})),r.a.createElement("div",null,this.state.activeStep===this.state.steps.length?r.a.createElement("div",null,r.a.createElement(Ce.a,{style:{marginTop:3,marginBottom:3},component:"span"},"Upload realizado com sucesso!"),r.a.createElement(Oe.a,{onClick:this.handleReset,style:{marginRight:3},component:"span"},"Adicionar mais")):r.a.createElement("div",null,r.a.createElement(Ce.a,{component:"span",style:{marginTop:3,marginBottom:3}},this.getStepContent(this.state.activeStep)),r.a.createElement("div",null,r.a.createElement(Oe.a,{disabled:0===this.state.activeStep,onClick:this.handleBack,style:{marginRight:3}},"Voltar"),this.isStepOptional(this.state.activeStep)&&r.a.createElement(Oe.a,{variant:"contained",color:"primary",onClick:this.handleSkip,style:{marginRight:3}},"Pular"),r.a.createElement(Oe.a,{variant:"contained",color:"primary",onClick:this.handleNext,style:{marginRight:3},disabled:this.state.activeStep===this.state.steps.length-1&&!this.state.uploadFinished},this.state.activeStep===this.state.steps.length-1?"Finalizar":"Seguinte"))))))}}]),t}(n.Component),Pa=Object(d.b)(function(e){return{isFetchingUsers:e.users.isFetching,users:e.users.data,error:e.users.error,auth:e.auth}},function(e){return{loadUsers:function(){return e({type:"LOAD_USERS_REQUEST"})}}})(Na),Ua=a(257),La=a.n(Ua),Ma=Object(be.a)(function(e){return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ve.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:e.spacing(7)+1},e.breakpoints.up("sm"),{width:e.spacing(9)+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:e.spacing(3)}}});function Wa(e){var t,a,n=Ma(),i=Object(we.a)(),s=r.a.useState(!1),d=Object(o.a)(s,2),m=d[0],u=d[1];function p(){e.logoutUser(e.history)}return r.a.createElement("div",{className:n.root},r.a.createElement(je.a,null),r.a.createElement(l.a,null,r.a.createElement(ye.a,{position:"fixed",className:Object(xe.a)(n.appBar,Object(ve.a)({},n.appBarShift,m))},r.a.createElement(Se.a,null,r.a.createElement(Ae.a,{color:"inherit","aria-label":"open drawer",onClick:function(){u(!0)},edge:"start",className:Object(xe.a)(n.menuButton,Object(ve.a)({},n.hide,m))},r.a.createElement(_e.a,null)),r.a.createElement(Ce.a,{variant:"h6",noWrap:!0},"Vets"),r.a.createElement("div",{className:n.sectionDesktop,style:{position:"absolute",right:"0",top:15,marginRight:50}},e.user.completename),r.a.createElement("div",{className:n.sectionDesktop,style:{fontSize:10,position:"absolute",right:"0",top:38,marginRight:50}},e.user.username))),r.a.createElement(Re.a,{variant:"permanent",className:Object(xe.a)(n.drawer,(t={},Object(ve.a)(t,n.drawerOpen,m),Object(ve.a)(t,n.drawerClose,!m),t)),classes:{paper:Object(xe.a)((a={},Object(ve.a)(a,n.drawerOpen,m),Object(ve.a)(a,n.drawerClose,!m),a))},open:m},r.a.createElement("div",{className:n.toolbar},r.a.createElement(Ae.a,{onClick:function(){u(!1)}},"rtl"===i.direction?r.a.createElement(Pe.a,null):r.a.createElement(Ie.a,null))),r.a.createElement(Fe.a,null),e.user.admin&&r.a.createElement("div",null,r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/register"},r.a.createElement(Le.a,null,r.a.createElement(Je.a,null)),r.a.createElement(Me.a,{primary:"Adicionar Usu\xe1rio"})),r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/users"},r.a.createElement(Le.a,null,r.a.createElement(Be.a,null)),r.a.createElement(Me.a,{primary:"Usu\xe1rios"}))),r.a.createElement(Fe.a,null),r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/add_admin_exams"},r.a.createElement(Le.a,null,r.a.createElement(La.a,null)),r.a.createElement(Me.a,{primary:"Adicionar Exame"})),r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/admin_exams"},r.a.createElement(Le.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Me.a,{primary:"Exames"}))),r.a.createElement(Fe.a,null),r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/profile"},r.a.createElement(Le.a,null,r.a.createElement(qe.a,null)),r.a.createElement(Me.a,{primary:"Perfil"}))),r.a.createElement(Fe.a,null),r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,onClick:p,color:"inherit"},r.a.createElement(Le.a,null,r.a.createElement(He.a,null)),r.a.createElement(Me.a,{primary:"Sair"})))),!e.user.admin&&r.a.createElement("div",null,r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/exams"},r.a.createElement(Le.a,null,r.a.createElement(Qe.a,null)),r.a.createElement(Me.a,{primary:"Exames"}))),r.a.createElement(Fe.a,null),r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,component:l.b,color:"inherit",to:"/profile"},r.a.createElement(Le.a,null,r.a.createElement(qe.a,null)),r.a.createElement(Me.a,{primary:"Perfil"}))),r.a.createElement(Fe.a,null),r.a.createElement(ke.a,null,r.a.createElement(Ue.a,{button:!0,color:"inherit",onClick:p},r.a.createElement(Le.a,null,r.a.createElement(He.a,null)),r.a.createElement(Me.a,{primary:"Sair"}))))),r.a.createElement(c.a,{exact:!0,path:"/users",component:xt}),r.a.createElement(c.a,{exact:!0,path:"/profile",component:Nt}),r.a.createElement(c.a,{exact:!0,path:"/exams",component:ca}),r.a.createElement(c.a,{exact:!0,path:"/add_admin_exams",component:Pa}),r.a.createElement(c.a,{exact:!0,path:"/admin_exams",component:ba}),r.a.createElement(c.a,{exact:!0,path:"/register",component:pt})))}var Ba=Object(be.a)(function(e){var t;return{root:{display:"flex"},appBar:{zIndex:e.zIndex.drawer+1,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{marginLeft:240,width:"calc(100% - ".concat(240,"px)"),transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:36},hide:{display:"none"},drawer:{width:240,flexShrink:0,whiteSpace:"nowrap"},drawerOpen:{width:240,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})},drawerClose:Object(ve.a)({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:7*e.spacing.unit+1},e.breakpoints.up("sm"),{width:9*e.spacing.unit+1}),toolbar:Object(h.a)({display:"flex",alignItems:"center",justifyContent:"flex-end",padding:"0 8px"},e.mixins.toolbar),content:{flexGrow:1,padding:3*e.spacing.unit},sectionDesktop:(t={display:"none"},Object(ve.a)(t,e.breakpoints.up("md"),{display:"flex"}),Object(ve.a)(t,"float","right"),Object(ve.a)(t,"position","absolute"),Object(ve.a)(t,"right","0"),t),title:{flexGrow:1,marginLeft:300}}}),za=function(e){function t(){return Object(pe.a)(this,t),Object(ge.a)(this,Object(fe.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){var e=this.props.auth,t=e.isAuthenticated,a=e.user,n=r.a.createElement("div",{className:Ba.sectionDesktop,style:{position:"absolute",right:"0"}},r.a.createElement(Oe.a,{component:l.b,color:"inherit",to:"/login",style:{marginRight:30}},"Consulte seu exame"));return r.a.createElement("div",{className:Ba.root},r.a.createElement(je.a,null),r.a.createElement(ye.a,{position:"fixed",className:Object(xe.a)(Ba.appBar,Object(ve.a)({},Ba.appBarShift,!1))},r.a.createElement(Se.a,null,r.a.createElement(Ce.a,{variant:"h6",className:Ba.title},"Vets"),r.a.createElement("div",null),t?"":n)),t?r.a.createElement(Wa,{logoutUser:this.props.logoutUser,history:this.props.history,user:a}):"")}}]),t}(n.Component),qa=Object(d.b)(function(e){return{auth:e.auth}},{logoutUser:ue})(Object(c.e)(za)),Va=a(461);L.a.config();var Ha=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={username:"",message:!1,errors:!1,isFetching:!1,emailSent:!1},a.handleSubmit=a.handleSubmit.bind(Object(Xe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),this.state.username&&this.state.username.length>4&&-1!=this.state.username.indexOf("@")&&-1!=this.state.username.indexOf(".")?(this.setState({isFetching:!0}),te.a.post("http://localhost:4444/api/users/forgot",{username:this.state.username}).then(function(e){t.setState({message:e.data.msg,errors:!1,isFetching:!1,emailSent:!0})}).catch(function(e){t.setState({errors:e&&e.response&&e.response.data?JSON.stringify(e.response.data.msg):"Erro desconhecido, tente mais tarde",isFetching:!1})})):this.setState({errors:"email invalido",isFetching:!1})}},{key:"handleInputChange",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){var e;return r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:6},r.a.createElement(st.a,{style:{width:"100%"}},r.a.createElement(lt.a,null,r.a.createElement(Ce.a,{color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(Ce.a,{variant:"h5",component:"h2"},"Recuperar Senha"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(at.a,{fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"username"},"E-mail"),r.a.createElement(rt.a,(e={type:"username",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(ve.a)(e,"onChange",this.handleInputChange),Object(ve.a)(e,"value",this.state.username),e)),this.state.errors&&r.a.createElement(it.a,{id:"username-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement(it.a,{id:"username-text",style:{color:"green"}},this.state.message)),r.a.createElement(ot.a,null,this.state.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30},fullWidth:!0},r.a.createElement(dt.a,null)),!this.state.isFetching&&r.a.createElement(Oe.a,{disabled:this.state.emailSent,fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Enviar E-mail de Recupera\xe7\xe3o de Senha")))))))}}]),t}(n.Component),Ya=function(e){function t(){var e;return Object(pe.a)(this,t),(e=Object(ge.a)(this,Object(fe.a)(t).call(this))).state={username:"",password:"",errors:{}},e.handleInputChange=e.handleInputChange.bind(Object(Xe.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(Xe.a)(e)),e}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"handleInputChange",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"handleSubmit",value:function(e){e.preventDefault(),console.log();var t={username:this.state.username,password:this.state.password};this.props.loginUser(t)}},{key:"componentDidMount",value:function(){this.props.auth.isAuthenticated&&this.props.history.push("/")}},{key:"componentWillReceiveProps",value:function(e){e.auth.isAuthenticated&&this.props.history.push("/"),e.errors&&this.setState({errors:e.errors})}},{key:"render",value:function(){var e,t,a=this.state.errors;return r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:6},r.a.createElement(st.a,{className:Ga.card},r.a.createElement(lt.a,null,r.a.createElement(Ce.a,{className:Ga.title,color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(Ce.a,{variant:"h5",component:"h2"},"Login"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(at.a,{className:Ga.formControl,fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"username"},"E-mail"),r.a.createElement(rt.a,(e={type:"username",id:"username",value:this.state.username,name:"username",onChange:this.handleInputChange,"aria-describedby":"username-text"},Object(ve.a)(e,"onChange",this.handleInputChange),Object(ve.a)(e,"value",this.state.username),e)),a.username&&r.a.createElement(it.a,{id:"username-text",style:{color:"red"}},a.username)),r.a.createElement(at.a,{fullWidth:!0,className:Ga.formControl},r.a.createElement(nt.a,{htmlFor:"password"},"Senha"),r.a.createElement(rt.a,(t={type:"password",id:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,"aria-describedby":"password-text"},Object(ve.a)(t,"onChange",this.handleInputChange),Object(ve.a)(t,"value",this.state.password),t)),a.password&&r.a.createElement(it.a,{id:"password-text",style:{color:"red"}},a.password)),r.a.createElement(ot.a,null,r.a.createElement(Oe.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit"},"Login")))),r.a.createElement(ot.a,null,r.a.createElement(Va.a,{component:Qa,to:"/forgot_password"},"Esqueceu sua senha?")))))}}]),t}(n.Component),Qa=r.a.forwardRef(function(e,t){return r.a.createElement(l.b,Object.assign({innerRef:t},e))}),Ga=Object(be.a)(function(e){return{container:{display:"flex",flexWrap:"wrap"},formControl:{margin:e.spacing(1),width:"100%"},card:{minWidth:275,maxWidth:400},button:{margin:e.spacing(1),width:"100%"},input:{display:"none",width:"100%"},title:{alignItems:"center",justify:"center"}}}),Ja=Object(d.b)(function(e){return{auth:e.auth,errors:e.errors}},{loginUser:function(e){return function(t){te.a.post("http://localhost:4444/api/users/login",e).then(function(e){console.log("res",e.data);var a=e.data.token;localStorage.setItem("jwtToken",a),de(a);var n=ce()(a);t(me(n))}).catch(function(e){console.log(e),console.log(e.response),e&&e.response?t({type:"GET_ERRORS",payload:e.response.data}):console.log(e)})}}})(Ya),Xa=function(e){function t(){return Object(pe.a)(this,t),Object(ge.a)(this,Object(fe.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{style:{backgroundColor:"red",marginTop:100}},"Home Component 22222222")}}]),t}(n.Component),$a=a(258),Ka=a(226);L.a.config();var Za=function(e){function t(e){var a;return Object(pe.a)(this,t),(a=Object(ge.a)(this,Object(fe.a)(t).call(this,e))).state={password:"",confirmPassword:"",message:!1,errors:!1,isFetching:!1,passwordReseted:!1},a.handleSubmit=a.handleSubmit.bind(Object(Xe.a)(a)),a.handleInputChange=a.handleInputChange.bind(Object(Xe.a)(a)),a}return Object(Ee.a)(t,e),Object(he.a)(t,[{key:"handleSubmit",value:function(e){var t=this;if(e.preventDefault(),this.state.password&&this.state.password.length<6)this.setState({errors:"A senha deve ter m\xednimo 6 carateres"});else if(this.state.password!=this.state.confirmPassword)this.setState({erros:"A senhas digitadas n\xe3o coincidem"});else{this.setState({isFetching:!0});var a="http://localhost:4444/api/users/reset_password/";2==this.props.location.search.split("=").length&&(a+="token/"+this.props.location.search.split("=")[1]),te.a.post(a,{password:this.state.password,confirmPassword:this.state.confirmPassword}).then(function(e){t.setState({message:e.data.msg,errors:!1,isFetching:!1,passwordReseted:!0})}).catch(function(e){t.setState({errors:JSON.stringify(e.response.data.msg),isFetching:!1})})}}},{key:"handleInputChange",value:function(e){this.setState(Object(ve.a)({},e.target.name,e.target.value))}},{key:"render",value:function(){return r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{minHeight:"100vh"}},r.a.createElement(ct.a,{item:!0,xs:6},r.a.createElement(st.a,{style:{width:"100%"}},r.a.createElement(lt.a,null,r.a.createElement(Ce.a,{color:"textSecondary",gutterBottom:!0},"Vets"),r.a.createElement(Ce.a,{variant:"h5",component:"h2"},"Resetar Senha"),r.a.createElement("form",{onSubmit:this.handleSubmit},r.a.createElement(at.a,{fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"password"},"Senha"),r.a.createElement(rt.a,Object(ve.a)({type:"password",id:"password",value:this.state.password,name:"password",onChange:this.handleInputChange,"aria-describedby":"password-text"},"onChange",this.handleInputChange))),r.a.createElement(at.a,{fullWidth:!0},r.a.createElement(nt.a,{htmlFor:"confirmPassword"},"Confirmar Senha"),r.a.createElement(rt.a,Object(ve.a)({type:"password",id:"confirmPassword",value:this.state.confirmPassword,name:"confirmPassword",onChange:this.handleInputChange,"aria-describedby":"confirmPassword-text"},"onChange",this.handleInputChange)),this.state.errors&&r.a.createElement(it.a,{id:"confirmPassword-text",style:{color:"red"}},this.state.errors),this.state.message&&r.a.createElement(it.a,{id:"confirmPassword-text",style:{color:"green"}},this.state.message)),r.a.createElement(ot.a,null,this.state.isFetching&&r.a.createElement(ct.a,{container:!0,spacing:0,direction:"column",alignItems:"center",justify:"center",style:{marginTop:30},fullWidth:!0},r.a.createElement(dt.a,null)),!this.state.isFetching&&r.a.createElement(Oe.a,{fullWidth:!0,variant:"contained",color:"primary",type:"submit",disabled:this.state.passwordReseted},"Redefinir Senha")))))))}}]),t}(n.Component);if(localStorage.jwtToken){de(localStorage.jwtToken);var en=ce()(localStorage.jwtToken);oe.dispatch(me(en));var tn=Date.now()/1e3;en.exp<tn&&(oe.dispatch(ue()),window.location.href="/login")}var an=function(){var e=Object(n.useState)({palette:{type:"light",primary:{main:"#13aa52"},secondary:{main:"#E33E7F"},accent:{main:"#E33E7F"},background:{default:"#e6e6e6"}}}),t=Object(o.a)(e,2),a=t[0],i=(t[1],Object($a.a)(a));return r.a.createElement(d.a,{store:oe},r.a.createElement(Ka.a,{theme:i},r.a.createElement(je.a,null),r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(qa,null),r.a.createElement(c.a,{exact:!0,path:"/",component:Xa}),r.a.createElement("div",{className:""},r.a.createElement(c.a,{exact:!0,path:"/login",component:Ja}),r.a.createElement(c.a,{exact:!0,path:"/forgot_password",component:Ha}),r.a.createElement(c.a,{exact:!0,path:"/reset_password",component:Za}))))))},nn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(r.a.createElement(an,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");nn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):rn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):rn(e)})}}()}},[[278,1,2]]]);
//# sourceMappingURL=main.d2e830c1.chunk.js.map